!function(t){function e(e){for(var n,r,s=e[0],l=e[1],c=e[2],d=0,u=[];d<s.length;d++)r=s[d],Object.prototype.hasOwnProperty.call(o,r)&&o[r]&&u.push(o[r][0]),o[r]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(t[n]=l[n]);for(p&&p(e);u.length;)u.shift()();return i.push.apply(i,c||[]),a()}function a(){for(var t,e=0;e<i.length;e++){for(var a=i[e],n=!0,s=1;s<a.length;s++){var l=a[s];0!==o[l]&&(n=!1)}n&&(i.splice(e--,1),t=r(r.s=a[0]))}return t}var n={},o={2:0},i=[];function r(e){if(n[e])return n[e].exports;var a=n[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=t,r.c=n,r.d=function(t,e,a){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)r.d(a,n,function(e){return t[e]}.bind(null,n));return a},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/public/js";var s=window.webpackJsonp=window.webpackJsonp||[],l=s.push.bind(s);s.push=e,s=s.slice();for(var c=0;c<s.length;c++)e(s[c]);var p=l;i.push([198,0,3]),a()}({0:function(t,e,a){"use strict";a.d(e,"c",(function(){return h})),a.d(e,"b",(function(){return f})),a.d(e,"a",(function(){return g}));var n=a(6),o=a.n(n),i=a(4),r=a.n(i);const[s,l,c,p]=[0,1,2,3];let d=s,u={notReady:!0};function h(t){let e,a="en";d!==c?(d=l,t.lang&&(a=t.lang),e=`/public/lang/${a}.json`,"en"!==a&&"integration"===t.env&&(e=`${t.url_prefix}${e}`),o.a.get(e).then(t=>{u=t.data,d=c}).catch(t=>{d=p,r.a.error("Failed to load language: "+a),console.error("language load failed: %o",t)})):r.a.warning("language already loaded")}function m(t,e){let a;return d===s?(a=`not loaded(${t}:${e})`,console.error(a),a):d!==c?(d===l?(a=`loading(${t}:${e})`,console.error(a)):(a=`failed(${t}:${e})`,console.error(a)),a):u[t]?e?u[t][e]?u[t][e]:null:u[t]:null}function f(t,e=!1,a){if("string"!=typeof t)return null;let[n,o]=t.split(":");return e?function(t,e,a){return new Promise((n,o)=>{d==l?function t(e,o,i,r=10,s=0){if(d===l)return s<=r?void setTimeout(()=>t(e,o,i,r,s+1),i):(console.error("timeout waiting for language to load: '%s:%s'",e,o),void n(a||"timeout"));n(m(e,o))}(t,e,250):n(m(t,e))})}(n,o,a):m(n,o)}function g(t,...e){const a=e.map(t=>{let e=f(t);return e||t});return t.reduce((t,e,n)=>{let o=a[n];return void 0===o&&(o=""),`${t}${e}${o}`},"")}},10:function(t,e,a){"use strict";a.d(e,"a",(function(){return h})),a.d(e,"c",(function(){return m})),a.d(e,"f",(function(){return f})),a.d(e,"b",(function(){return g})),a.d(e,"e",(function(){return b})),a.d(e,"d",(function(){return k})),a.d(e,"g",(function(){return $}));var n=a(25),o=a(75),i=a.n(o),r=a(8),s=a.n(r);const l={lj:"Tue Jun 16 17:50:09 HST 2020",wos:"Tue Jun 16 17:52:44 HST 2020",woh:"Sun Jul  5 22:31:36 HST 2020",wot:"Tue Jul  7 16:30:14 HST 2020",wok:"Wed Jul  8 22:27:03 HST 2020",early:"Thu Nov  5 13:06:17 HST 2020",acq:"Mon Jun 29 23:12:23 HST 2020"};var c=a(2);const p=a(16);let d,u={SID:0,BID:0,UID:1,environment:"",prefix:"",timingBase:"/public/timing",configUrl:"/standalone/config"};function h(t){return new Promise((e,a)=>{i.a.get(`${u.timingBase}${t}`).then(t=>{e(t.data)}).catch(t=>{a(t)})})}function m(t,e=!0){let a="cfg"+t,o=`${u.configUrl}/${t}.json`;return new Promise((t,i)=>{Object(n.a)(o,a,l).then(a=>{e&&(d=a),t(a)}).catch(t=>{i(t)})})}function f(t){let e="cfg"+t,a=`${u.configUrl}/${t}.json`;return t?new Promise((t,o)=>{Object(n.a)(a,e,l).then(e=>{d=e,t(!0)}).catch(t=>{d=null,console.error(t),o(t)})}):Promise.resolve(!1)}function g(t){if(!d)throw new Error("Configuration has not been initialized");let e=d.contents.find(e=>t.startsWith(e.url));return e?(e.url!==t&&(e=e.contents.find(e=>e.url===t)),e?(e.audioBase=u.audioBase,e):(s.a.error(Object(c.a)("error:e4")),{})):(s.a.error(Object(c.a)("error:e4")),{})}function b(t){let e=g(t);return e.timer?e.timer:null}function k(t,e=!1){let a=p.decodeKey(t),n={pageKey:t,source:u.title,bookId:a.bookId};return e&&(n.data=e),new Promise((e,o)=>{if(-1===t)return n.bookTitle=Object(c.a)("label:l1"),n.title=Object(c.a)("label:l2"),n.url="",void e(n);m(a.bookId,!1).then(t=>{if(t){let o=function(t,e){let a=p.getUrl(t.key,!0),n=e.find(t=>a.startsWith(t.url));return n?(n.url!==a&&(n=n.contents.find(t=>t.url===a)),n||{title:"not found",url:""}):{title:"not found",url:""}}(a,t.contents);n.bookTitle=t.title,n.title=o.title,n.url=o.url,e(n)}else n.bookTitle=Object(c.a)("label:l1"),n.title=Object(c.a)("label:l2"),n.url=""}).catch(t=>{o(t)})})}function $(t){u.configStore=t.configStore,u.title=t.title,u.audioBase=t.audioBase,u.environment=t.env,"standalone"!==t.env&&(u.SID+=1,u.BID+=2,u.UID+=2,u.prefix=t.url_prefix,u.timingBase=`${t.url_prefix}${u.timingBase}`,u.configUrl=u.configUrl.replace("/standalone",t.url_prefix+"/public"))}},11:function(t,e,a){"use strict";a.d(e,"a",(function(){return l})),a.d(e,"b",(function(){return c})),a.d(e,"e",(function(){return p})),a.d(e,"g",(function(){return d})),a.d(e,"d",(function(){return u})),a.d(e,"f",(function(){return h})),a.d(e,"c",(function(){return m}));var n=a(13),o=a.n(n);function i(t,e){let a;a=e?e.substring(1):window.location.search.substring(1);let n=a.split("&");for(let e=0;e<n.length;e++){let a=n[e].split("=");if(a[0]===t)return a[1]}return null}function r(t,e){o()(document.getElementById(t),{align:{top:.2}},t=>{})}function s(){history.replaceState({},document.title,location.origin+location.pathname)}function l(){$("#transcript-page-loading").removeClass("active"),s()}function c(){i("as")&&$("#transcript-page-loading").addClass("active")}function p(){let t=i("v");t&&(setTimeout(r,250,t,"showParagraph"),s())}function d(){let t=i("tocbook");t&&$(`[data-book="${t}"]`).trigger("click")}function u(){let t=i("bkmk");return t?(s(),t):null}function h(){let t=i("srch");return t?(s(),t):null}function m(){let t=i("as");return t||null}},12:function(t,e,a){"use strict";var n=a(80),o=a.n(n),i=a(4),r=a.n(i),s=a(0),l=new Map;function c(t){var e,a=new o.a(t);return(e=a).on("success",t=>{t.text.indexOf("tocbook")>-1?($(".toc.modal > .message").html(`<p>${Object(s.b)("clip:url")}</p>`),setTimeout(()=>{$(".toc.modal > .message > p").remove()},2e3)):r.a.info(Object(s.b)("clip:link")),t.clearSelection()}),e.on("error",()=>{r.a.info(Object(s.b)("error:e3"))}),a}e.a={register:function(t){let e=l.get(t);return e||(e=c(t),l.set(t,e)),e},destroy:function(t){let e=l.get(t);e&&(e.destroy(),l.delete(t))}}},16:function(t,e,a){const n=a(86),o=a(129).sprintf;function i(...t){let e=c(t),{unit:a,subunit:o}=r(t);if(n.contents[e])return n.contents[e].indexOf(a);throw new Error("unexpected bookId: "+e)}function r(t){let e,a=3;return"t"!==t[0]&&(a=1),t.length===a+2&&(e=t[a+1]),{unit:t[a],subunit:e}}function s(){return{sourceId:n.sourceId,keyLength:9}}function l(t){const e=s();let a=t,n=0;"number"==typeof a&&(a=t.toString(10));let o=a.indexOf(".");if(o>-1){let t=a.substr(o+1);switch(t.length){case 1:t+="00";break;case 2:t+="0"}n=parseInt(t,10)}return{paraKey:n,pageKey:parseInt(a.substr(0,e.keyLength),10)}}function c(t){return"t"===t[0]?t[2]:t[0]}function p(t=location.pathname){let e={sid:n.sourceId,bid:0,uid:0,xid:0},a=function(t){let e=t;return e=t.substr(1),"/"===e[e.length-1]&&(e=e.substr(0,e.length-1)),e.split("/")}(t);if(e.bid=n.bookIds.indexOf(c(a)),-1===e.bid)return-1;if(e.uid=i(...a),-1===e.uid)return-1;if(e.xid=function(...t){let e=c(t),{unit:a,subunit:o}=r(t),i=e+"2";if(!o)return 0;if(n.contents[i])return n.contents[i].indexOf("/"+o);throw new Error("unexpected bookId: "+i)}(...a),-1===e.xid)return-1;let s=o("%02s%02s%03s%02s",e.sid,e.bid,e.uid,e.xid);return parseInt(s,10)}function d(t){let{pid:e,pageKey:a}=l(t),o=a.toString(10),i={error:!1,key:t,message:"ok",sid:0,bookId:"",uid:0,xid:0,pid:e?e-1:-1};if(9!==o.length)return i.error=!0,i.message="Integer portion of key should have a length of 9, key is: "+o,i;if(i.sid=parseInt(o.substr(0,2),10),i.sid!==n.sourceId)return i.error=!0,i.message=`Invalid sourceId: ${i.sid}, expecting: ${n.sourceId}`,i;let r=parseInt(o.substr(2,2),10);return i.bookId=n.bookIds[r],i.uid=parseInt(o.substr(4,3),10),i.xid=parseInt(o.substr(7,2),10),i}t.exports={getNumberOfUnits:function(t){if(n.contents[t])return n.contents[t].length-1;throw new Error("getNumberOfUnits() unexpected bookId: "+t)},getBooks:function(){return n.books},getSourceId:function(){return n.sourceId},getKeyInfo:s,parseKey:l,getUnitId:i,genPageKey:p,genParagraphKey:function(t,e=location.pathname){let a,n=e;return a="string"==typeof t?(parseInt(t.substr(1),10)+1)/1e3:(t+1)/1e3,"string"==typeof e&&(n=p(e)),n+a},decodeKey:d,getUrl:function(t,e=!1){let a,o,i=d(t),r="/invalid/key/";return i.error?r:n.contents[i.bookId]&&(a=n.contents[i.bookId][i.uid],i.xid>0?(o=n.contents[i.bookId+"2"][i.xid],r=`/${i.bookId}/${a}${o}/`):r=`/${i.bookId}/${a}/`,e)?`${n.prefix}${r}`:r},describeKey:function(t){let e=d(t);if(e.error)return{key:t,error:!0,source:n.sid};let a={key:t,source:n.sid,book:e.bookId,unit:n.contents[e.bookId][e.uid],subunit:n.contents[e.bookId+"2"][e.xid]};return e.pid>-1&&(a.pid="p"+e.pid),a}}},198:function(t,e,a){t.exports=a(494)},2:function(t,e,a){"use strict";a.d(e,"a",(function(){return o}));var n={label:{key:"Klucz",l1:"Nieznany tytuł książki",l2:"Tytuł nieznany",l3:"Spis treści",l4:"Szukaj",l5:"z",l6:"Last Search Result"},notify:{n1:"Kliknięcie jest ignorowane, gdy audio nie jest odtwarzane.",n2:"Uwaga! Dane znaczników czasu zostaną utracone, jeśli zamkniesz okno bez wysłania danych.",n3:"Twoje dane zostaną utracone",n4:"Dziękuję! Przesłanie danych powiodło się.",n5:"Przykro mi, przesłanie danych nie powiodło się.",n6:"Przywrócono częściowe dane znaczników czasu. Możesz kontynuować od miejsca, w którym skończyłeś.",n7:"Sesja wprowadzania znaczników czasu jest niezakończona. Zacznij wprowadzać znaczniki w miejscu, gdzie poprzednio skończyłeś.",n8:"Sesja wprowadzania znaczników czasu jest kompletna, jednak dane nie zostały przekazane. Proszę prześlij nam dane.",n9:"Wyszukiwanie nie dało żadnych rezultatów.",n10:"Brak rezultatów wyszukiwania w",n11:"Wyróżnienie nie powiodło się.",n12:"wyniki wyszukiwania"},search:{s1:"Wyszukiwanie rozpoczęte...",s2:"Szukanie",s3:"Szukaj",s4:"z",s5:"znalezione",s6:"dopasowania",s7:"Rezultaty wyszukiwania",s8:"Błąd wyszukiwania",s9:"nie znaleziono żadnych dopasowań",s10:"Akapit",s11:"Rezultaty ostatniego wyszukiwania"},html:{h1:"Niech to..! Przesłanie danych nie powiodło się.",h2:"Aby przesłać dane ponownie, spróbuj odświeżyć stronę albo ponów próbę za jakiś czas. Dane nie zostaną utracone. Ten formularz zostanie wyświetlony następnym razem, gdy odwiedzisz stronę."},error:{e1:"Nieoczekiwana liczba punktów danych w istniejącym zbiorze danych znaczników czasu. Skontaktuj się proszę z Rick'iem. Nie można wprowadzać znaczników czasu dopóki problem nie zostanie rozwiązany.",e2:"Nie powiodło się wczytanie znaczników czasu pliku audio",e3:"Niepoprawna konfiguracja pliku",e4:"Błąd konfiguracji pliku. Nie znaleziono adresu url.",e5:"Nie znaleziono tytułu",e6:"Nie powiodło się wczytanie pliku konfiguracji",e7:"Wprowadź proszę swoje imię",e8:"Podaj proszę swój adres mailowy",e9:"Proszę wpisać wiadomość",e10:"Dziękuję",e11:"Przepraszamy, nastąpił błąd komunikacji!"}};a(8);function o(t){if("string"!=typeof t)return null;let[e,a]=t.split(":");return n[e]?a?n[e][a]?n[e][a]:null:n[e]:null}},21:function(t,e,a){"use strict";a.d(e,"a",(function(){return i}));var n=a(76),o=a.n(n);function i(t){return o.a.sanitize(t,{SAFE_FOR_JQUERY:!0})}},23:function(t,e,a){"use strict";a.d(e,"a",(function(){return r})),a.d(e,"b",(function(){return s}));var n=a(6),o=a.n(n),i=a(9);function r(t){return new Promise((e,a)=>{o.a.get(`${i.a.user}/mailList/${t}`).then(t=>{e(t.data.mailList)}).catch(t=>{a(t)})})}function s(t){return new Promise((e,a)=>{o.a.post(i.a.user+"/share",t).then(t=>{200===t.status?e("success"):e(t.data.message)}).catch(t=>{a(t)})})}},25:function(t,e,a){"use strict";a.d(e,"b",(function(){return h})),a.d(e,"a",(function(){return m}));var n=a(3),o=a(6),i=a.n(o);const r=a(87),s=a(88),l=a(89),c=a(90),p=a(91),d=a(92),u=a(16);function h(t){if("string"!=typeof t&&(t=""+t),t.startsWith("12"))return r.getUrl(t,!0);if(t.startsWith("15"))return s.getUrl(t,!0);if(t.startsWith("14"))return l.getUrl(t,!0);if(t.startsWith("11"))return p.getUrl(t,!0);if(t.startsWith("13"))return c.getUrl(t,!0);if(t.startsWith("10"))return d.getUrl(t,!0);if(t.startsWith("16"))return u.getUrl(t,!0);throw new Error(`getUrlByPageKey(${t}): invalid key`)}function m(t,e,a){return new Promise((o,r)=>{let s=Object(n.a)(e);!s||function(t,e){let a=e[t.bid];if(!t.saveDate)return t.saveDate=a,!0;return t.saveDate!==a&&(t.saveDate=a,!0)}(s,a)?i.a.get(t).then(t=>{t.data.saveDate=a[t.data.bid],Object(n.c)(e,t.data),o(t.data)}).catch(t=>{console.error(t),r(t)}):o(s)})}},3:function(t,e,a){"use strict";a.d(e,"c",(function(){return s})),a.d(e,"a",(function(){return l})),a.d(e,"b",(function(){return c}));var n=a(14),o=a.n(n);let i=new Map;function r(t){const e=i.get(t);if(!e)throw new Error("store: key not found: "+t);return e}function s(t,e){o.a.set(r(t),e)}function l(t,e){return o.a.get(r(t))||e}function c(t){let e=t.sid;for(const a in t.store)i.set(a,`${e}.${t.store[a]}`)}},40:function(t,e,a){"use strict";a.d(e,"c",(function(){return r})),a.d(e,"b",(function(){return l})),a.d(e,"a",(function(){return c}));var n=a(27),o=a(3);let i;function r(t){i=t,l(),function(){var t=$(".transcript p");if(0===t.length)return;t.each((function(t){$(this).hasClass("omit")?0:$(this).parents("div.footnotes").length>0||($(this).attr("id","p"+t).addClass("cmiTranPara").prepend(`<span class='pnum'>(p${t})&nbsp;</span>`))}))}(),function(){let t=0!==$(".toggle-paragraph-markers").length,e=Object(o.a)(i),a=$(".transcript.ui.text.container"),n=a.hasClass("hide-pnum")?"off":"on";if(!t)return void $(".transcript.ui.text.container").addClass("hide-pnum");e||(e=n,Object(o.c)(i,e));e!==n&&("on"===e?a.removeClass("hide-pnum"):a.addClass("hide-pnum"));s(e)}(),$(".toggle-paragraph-markers").on("click",(function(t){t.preventDefault();let e=$(".transcript.ui.text.container");e.hasClass("hide-pnum")?(e.removeClass("hide-pnum"),Object(o.c)(i,"on"),s("on")):(e.addClass("hide-pnum"),Object(o.c)(i,"off"),s("off"))}))}function s(t){"on"===t?$(".toggle-paragraph-markers > span .paragraph-corner-icon").addClass("hide"):$(".toggle-paragraph-markers > span .paragraph-corner-icon").removeClass("hide")}function l(){$(".main.menu").visibility({type:"fixed",onFixed:function(t){},onUnfixed:function(t){}}),$(".main.menu  .ui.dropdown").dropdown({on:"hover"}),$(".source-features > .menu .item").tab()}function c(t="[data-book]"){$("#page-contents").on("mouseover",t,(function(t){n.a.to($(this),.2,{className:"+=gsap-hover"}),n.a.to($(this),.2,{scale:"1.1"})})),$("#page-contents").on("mouseout",t,(function(t){n.a.to($(this),.2,{className:"-=gsap-hover"}),n.a.to($(this),.2,{scale:"1.0"})}))}},403:function(t,e,a){var n=a(404);"string"==typeof n&&(n=[[t.i,n,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};a(32)(n,o);n.locals&&(t.exports=n.locals)},404:function(t,e,a){},405:function(t,e,a){
/*!
 * MediaElement.js
 * http://www.mediaelementjs.com/
 *
 * Wrapper that mimics native HTML5 MediaElement (audio and video)
 * using a variety of technologies (pure JavaScript, Flash, iframe)
 *
 * Copyright 2010-2017, John Dyer (http://j.hn/)
 * License: MIT
 *
 */
!function t(e,a,n){function o(r,s){if(!a[r]){if(!e[r]){if(i)return i(r,!0);var l=new Error("Cannot find module '"+r+"'");throw l.code="MODULE_NOT_FOUND",l}var c=a[r]={exports:{}};e[r][0].call(c.exports,(function(t){var a=e[r][1][t];return o(a||t)}),c,c.exports,t,e,a,n)}return a[r].exports}for(var i=!1,r=0;r<n.length;r++)o(n[r]);return o}({1:[function(t,e,a){"use strict";mejs.i18n.en["mejs.time-jump-forward"]=["Jump forward 1 second","Jump forward %1 seconds"],Object.assign(mejs.MepDefaults,{jumpForwardInterval:30,jumpForwardText:null}),Object.assign(MediaElementPlayer.prototype,{buildjumpforward:function(t,e,a,n){var o=this,i=mejs.i18n.t("mejs.time-jump-forward",o.options.jumpForwardInterval),r=mejs.Utils.isString(o.options.jumpForwardText)?o.options.jumpForwardText.replace("%1",o.options.jumpForwardInterval):i,s=document.createElement("div");s.className=o.options.classPrefix+"button "+o.options.classPrefix+"jump-forward-button",s.innerHTML='<button type="button" aria-controls="'+o.id+'" title="'+r+'" aria-label="'+r+'" tabindex="0">'+o.options.jumpForwardInterval+"</button>",o.addControlElement(s,"jumpforward"),s.addEventListener("click",(function(){var t=isNaN(n.duration)?o.options.jumpForwardInterval:n.duration;if(t){var e=n.currentTime===1/0?0:n.currentTime;n.setCurrentTime(Math.min(e+o.options.jumpForwardInterval,t)),this.querySelector("button").blur()}}))}})},{}]},{},[1])},406:function(t,e,a){var n=a(407);"string"==typeof n&&(n=[[t.i,n,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};a(32)(n,o);n.locals&&(t.exports=n.locals)},407:function(t,e,a){},408:function(t,e,a){
/*!
 * MediaElement.js
 * http://www.mediaelementjs.com/
 *
 * Wrapper that mimics native HTML5 MediaElement (audio and video)
 * using a variety of technologies (pure JavaScript, Flash, iframe)
 *
 * Copyright 2010-2017, John Dyer (http://j.hn/)
 * License: MIT
 *
 */
!function t(e,a,n){function o(r,s){if(!a[r]){if(!e[r]){if(i)return i(r,!0);var l=new Error("Cannot find module '"+r+"'");throw l.code="MODULE_NOT_FOUND",l}var c=a[r]={exports:{}};e[r][0].call(c.exports,(function(t){var a=e[r][1][t];return o(a||t)}),c,c.exports,t,e,a,n)}return a[r].exports}for(var i=!1,r=0;r<n.length;r++)o(n[r]);return o}({1:[function(t,e,a){"use strict";mejs.i18n.en["mejs.time-skip-back"]=["Skip back 1 second","Skip back %1 seconds"],Object.assign(mejs.MepDefaults,{skipBackInterval:30,skipBackText:null}),Object.assign(MediaElementPlayer.prototype,{buildskipback:function(t,e,a,n){var o=this,i=mejs.i18n.t("mejs.time-skip-back",o.options.skipBackInterval),r=mejs.Utils.isString(o.options.skipBackText)?o.options.skipBackText.replace("%1",o.options.skipBackInterval):i,s=document.createElement("div");s.className=o.options.classPrefix+"button "+o.options.classPrefix+"skip-back-button",s.innerHTML='<button type="button" aria-controls="'+o.id+'" title="'+r+'" aria-label="'+r+'" tabindex="0">'+o.options.skipBackInterval+"</button>",o.addControlElement(s,"skipback"),s.addEventListener("click",(function(){if(isNaN(n.duration)?o.options.skipBackInterval:n.duration){var t=n.currentTime===1/0?0:n.currentTime;n.setCurrentTime(Math.max(t-o.options.skipBackInterval,0)),this.querySelector("button").blur()}}))}})},{}]},{},[1])},409:function(t,e,a){var n=a(410);"string"==typeof n&&(n=[[t.i,n,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};a(32)(n,o);n.locals&&(t.exports=n.locals)},41:function(t,e,a){"use strict";a.d(e,"b",(function(){return u}));var n=a(18),o=a.n(n),i=a(10),r=a(12),s=a(2);const l=Object(s.a)("label:l3");function c(t){return t.timing?" __timing":t.timer?" __timer":""}function p(t,e){var a={counter:0},n="ui list";return e&&(n=`${n} ${e}`),`\n    <div class="${n}">\n      ${t.map(t=>`\n        <div class="item">\n          <a data-lid="${++a.counter}" class="item${c(t)}" href="${t.url}">${t.title}</a>\n          ${t.contents?function(t,e){return`\n    <div class="list">\n      ${t.map(t=>`<a data-lid="${++e.counter}" class="item${c(t)}" href="${t.url}">${t.title}</a>`).join("")}\n    </div>\n  `}(t.contents,a):""}\n        </div>\n      `).join("")}\n    </div>\n  `}function d(){let t=$("#contents-modal-open").attr("data-book").toLowerCase();Object(i.c)(t).then(t=>{$(".toc-image").attr("src",""+t.image),$(".toc-title").html(`${l}: <em>${t.title}</em>`),$(".toc-list").html(p(t.contents,t.toc||"")),function(t,e=1){let a=location.pathname,n=$(`.toc-list a[href='${a}']`);n.addClass("current-unit").removeAttr("href"),function(t,e){let a,n,o=e,i=-1,r=-1,s=t.attr("data-lid"),l=parseInt(s,10);1===l?$("#toc-previous-page").addClass("disabled"):($("#toc-previous-page").removeClass("disabled"),i=l-1);l===o?$("#toc-next-page").addClass("disabled"):($("#toc-next-page").removeClass("disabled"),r=l+1);i>-1&&(a=$(`a[data-lid="${i}"]`).attr("href"),n=$(`a[data-lid="${i}"]`).text(),$("#toc-previous-page > span").attr("data-tooltip",""+n),$("#toc-previous-page").attr("href",""+a));r>-1&&(a=$(`a[data-lid="${r}"]`).attr("href"),n=$(`a[data-lid="${r}"]`).text(),$("#toc-next-page > span").attr("data-tooltip",""+n),$("#toc-next-page").attr("href",""+a))}(n,e)}(t.bid,t.totalPages)}).catch(t=>{console.error(t),$(".toc-image").attr("src","/public/img/cmi/toc_modal.png"),$(".toc-title").html("${tocString}: <em>Error</em>"),$(".toc-list").html(`<p>Error: ${t.message}</p>`),$(".toc.ui.modal").modal("show")})}function u(){return $(".toc-modal-open").attr("data-book")}e.a={initialize:function(t){$(".toc.ui.modal").modal({dimmerSettings:{opacity:.5},observeChanges:!0,onVisible:function(){let t=$(".toc-list a.current-unit");o()(t.get(0),{isScrollable:function(t,e){return e(t)||t.className.includes("scrolling")}})}}),"transcript"===t&&d(),$(".toc-modal-open").on("click",e=>{e.preventDefault();let a=$(e.currentTarget).attr("data-book").toLowerCase();"transcript"!==t?Object(i.c)(a).then(t=>{let e=`${location.origin}${location.pathname}?tocbook=${a}`;$(".toc-image").attr("src",""+t.image),$(".toc-title").html(`<i data-clipboard-text="${e}" title="Copy to Clipboard" class="tiny share alternate icon toc-share"></i>&nbsp;${l}: <em>${t.title}</em>`),$(".toc-list").html(p(t.contents,t.toc||"")),$(".toc.ui.modal").modal("show"),r.a.register(".share.icon.toc-share")}).catch(t=>{$(".toc-image").attr("src","/public/img/cmi/toc_modal.png"),$(".toc-title").html("${tocString}: <em>Error</em>"),$(".toc-list").html(`<p>${Object(s.a)("error:e6")} ${a}.json`),$(".toc.ui.modal").modal("show")}):$(".toc.ui.modal").modal("show")})}}},410:function(t,e,a){},411:function(t,e,a){
/*!
 * MediaElement.js
 * http://www.mediaelementjs.com/
 *
 * Wrapper that mimics native HTML5 MediaElement (audio and video)
 * using a variety of technologies (pure JavaScript, Flash, iframe)
 *
 * Copyright 2010-2017, John Dyer (http://j.hn/)
 * License: MIT
 *
 */
!function t(e,a,n){function o(r,s){if(!a[r]){if(!e[r]){if(i)return i(r,!0);var l=new Error("Cannot find module '"+r+"'");throw l.code="MODULE_NOT_FOUND",l}var c=a[r]={exports:{}};e[r][0].call(c.exports,(function(t){var a=e[r][1][t];return o(a||t)}),c,c.exports,t,e,a,n)}return a[r].exports}for(var i=!1,r=0;r<n.length;r++)o(n[r]);return o}({1:[function(t,e,a){"use strict";mejs.i18n.en["mejs.speed-rate"]="Speed Rate",Object.assign(mejs.MepDefaults,{speeds:["2.00","1.50","1.25","1.00","0.75"],defaultSpeed:"1.00",speedChar:"x",speedText:null}),Object.assign(MediaElementPlayer.prototype,{buildspeed:function(t,e,a,n){var o=this;if(null!==o.media.rendererName&&/(native|html5)/i.test(o.media.rendererName)){for(var i=[],r=mejs.Utils.isString(o.options.speedText)?o.options.speedText:mejs.i18n.t("mejs.speed-rate"),s=function(t){for(var e=0,a=i.length;e<a;e++)if(i[e].value===t)return i[e].name},l=void 0,c=!1,p=0,d=o.options.speeds.length;p<d;p++){var u=o.options.speeds[p];"string"==typeof u?(i.push({name:""+u+o.options.speedChar,value:u}),u===o.options.defaultSpeed&&(c=!0)):(i.push(u),u.value===o.options.defaultSpeed&&(c=!0))}c||i.push({name:o.options.defaultSpeed+o.options.speedChar,value:o.options.defaultSpeed}),i.sort((function(t,e){return parseFloat(e.value)-parseFloat(t.value)})),o.cleanspeed(t),t.speedButton=document.createElement("div"),t.speedButton.className=o.options.classPrefix+"button "+o.options.classPrefix+"speed-button",t.speedButton.innerHTML='<button type="button" aria-controls="'+o.id+'" title="'+r+'" aria-label="'+r+'" tabindex="0">'+s(o.options.defaultSpeed)+'</button><div class="'+o.options.classPrefix+"speed-selector "+o.options.classPrefix+'offscreen"><ul class="'+o.options.classPrefix+'speed-selector-list"></ul></div>',o.addControlElement(t.speedButton,"speed");for(var h=0,m=i.length;h<m;h++){var f=o.id+"-speed-"+i[h].value;t.speedButton.querySelector("ul").innerHTML+='<li class="'+o.options.classPrefix+'speed-selector-list-item"><input class="'+o.options.classPrefix+'speed-selector-input" type="radio" name="'+o.id+'_speed"disabled="disabled" value="'+i[h].value+'" id="'+f+'"  '+(i[h].value===o.options.defaultSpeed?' checked="checked"':"")+'/><label for="'+f+'" class="'+o.options.classPrefix+"speed-selector-label"+(i[h].value===o.options.defaultSpeed?" "+o.options.classPrefix+"speed-selected":"")+'">'+i[h].name+"</label></li>"}l=o.options.defaultSpeed,t.speedSelector=t.speedButton.querySelector("."+o.options.classPrefix+"speed-selector");for(var g=["mouseenter","focusin"],b=["mouseleave","focusout"],k=t.speedButton.querySelectorAll('input[type="radio"]'),$=t.speedButton.querySelectorAll("."+o.options.classPrefix+"speed-selector-label"),v=0,y=g.length;v<y;v++)t.speedButton.addEventListener(g[v],(function(){mejs.Utils.removeClass(t.speedSelector,o.options.classPrefix+"offscreen"),t.speedSelector.style.height=t.speedSelector.querySelector("ul").offsetHeight,t.speedSelector.style.top=-1*parseFloat(t.speedSelector.offsetHeight)+"px"}));for(var w=0,x=b.length;w<x;w++)t.speedSelector.addEventListener(b[w],(function(){mejs.Utils.addClass(this,o.options.classPrefix+"offscreen")}));for(var j=0,I=k.length;j<I;j++){var z=k[j];z.disabled=!1,z.addEventListener("click",(function(){var e=this.value;l=e,n.playbackRate=parseFloat(e),t.speedButton.querySelector("button").innerHTML=s(e);for(var a=t.speedButton.querySelectorAll("."+o.options.classPrefix+"speed-selected"),i=0,r=a.length;i<r;i++)mejs.Utils.removeClass(a[i],o.options.classPrefix+"speed-selected");this.checked=!0;for(var c=mejs.Utils.siblings(this,(function(t){return mejs.Utils.hasClass(t,o.options.classPrefix+"speed-selector-label")})),p=0,d=c.length;p<d;p++)mejs.Utils.addClass(c[p],o.options.classPrefix+"speed-selected")}))}for(var C=0,O=$.length;C<O;C++)$[C].addEventListener("click",(function(){var t=mejs.Utils.siblings(this,(function(t){return"INPUT"===t.tagName}))[0],e=mejs.Utils.createEvent("click",t);t.dispatchEvent(e)}));t.speedSelector.addEventListener("keydown",(function(t){t.stopPropagation()})),n.addEventListener("loadedmetadata",(function(){l&&(n.playbackRate=parseFloat(l))}))}},cleanspeed:function(t){t&&(t.speedButton&&t.speedButton.parentNode.removeChild(t.speedButton),t.speedSelector&&t.speedSelector.parentNode.removeChild(t.speedSelector))}})},{}]},{},[1])},412:function(t,e,a){var n=a(413);"string"==typeof n&&(n=[[t.i,n,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};a(32)(n,o);n.locals&&(t.exports=n.locals)},413:function(t,e,a){},414:function(t,e,a){
/*!
 * MediaElement.js
 * http://www.mediaelementjs.com/
 *
 * Wrapper that mimics native HTML5 MediaElement (audio and video)
 * using a variety of technologies (pure JavaScript, Flash, iframe)
 *
 * Copyright 2010-2017, John Dyer (http://j.hn/)
 * License: MIT
 *
 */
!function t(e,a,n){function o(r,s){if(!a[r]){if(!e[r]){if(i)return i(r,!0);var l=new Error("Cannot find module '"+r+"'");throw l.code="MODULE_NOT_FOUND",l}var c=a[r]={exports:{}};e[r][0].call(c.exports,(function(t){var a=e[r][1][t];return o(a||t)}),c,c.exports,t,e,a,n)}return a[r].exports}for(var i=!1,r=0;r<n.length;r++)o(n[r]);return o}({1:[function(t,e,a){"use strict";mejs.i18n.en["mejs.nextp"]="Next Paragraph",Object.assign(mejs.MepDefaults,{nextpText:null}),Object.assign(MediaElementPlayer.prototype,{buildnextp:function(t,e,a,n){var o=this,i=mejs.Utils.isString(o.options.nextpText)?o.options.nextpText:mejs.i18n.t("mejs.nextp"),r=document.createElement("div");r.className=o.options.classPrefix+"button "+o.options.classPrefix+"nextp-button "+o.options.classPrefix+"nextp",r.innerHTML='<button type="button" aria-controls="'+o.id+'" title="'+i+'" aria-label="'+i+'" tabindex="0"></button>',o.addControlElement(r,"nextp"),r.addEventListener("click",(function(){if(!t.paused){var e=mejs.Utils.createEvent("nextp",n);n.dispatchEvent(e)}}))}})},{}]},{},[1])},415:function(t,e,a){var n=a(416);"string"==typeof n&&(n=[[t.i,n,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};a(32)(n,o);n.locals&&(t.exports=n.locals)},416:function(t,e,a){},417:function(t,e,a){
/*!
 * MediaElement.js
 * http://www.mediaelementjs.com/
 *
 * Wrapper that mimics native HTML5 MediaElement (audio and video)
 * using a variety of technologies (pure JavaScript, Flash, iframe)
 *
 * Copyright 2010-2017, John Dyer (http://j.hn/)
 * License: MIT
 *
 */
!function t(e,a,n){function o(r,s){if(!a[r]){if(!e[r]){if(i)return i(r,!0);var l=new Error("Cannot find module '"+r+"'");throw l.code="MODULE_NOT_FOUND",l}var c=a[r]={exports:{}};e[r][0].call(c.exports,(function(t){var a=e[r][1][t];return o(a||t)}),c,c.exports,t,e,a,n)}return a[r].exports}for(var i=!1,r=0;r<n.length;r++)o(n[r]);return o}({1:[function(t,e,a){"use strict";mejs.i18n.en["mejs.prevp"]="Previous Paragraph",Object.assign(mejs.MepDefaults,{prevpText:null}),Object.assign(MediaElementPlayer.prototype,{buildprevp:function(t,e,a,n){var o=this,i=mejs.Utils.isString(o.options.prevpText)?o.options.prevpText:mejs.i18n.t("mejs.prevp"),r=document.createElement("div");r.className=o.options.classPrefix+"button "+o.options.classPrefix+"prevp-button "+o.options.classPrefix+"prevp",r.innerHTML='<button type="button" aria-controls="'+o.id+'" title="'+i+'" aria-label="'+i+'" tabindex="0"></button>',o.addControlElement(r,"prevp"),r.addEventListener("click",(function(){if(!t.paused){var e=mejs.Utils.createEvent("prevp",n);n.dispatchEvent(e)}}))}})},{}]},{},[1])},418:function(t,e,a){var n=a(419);"string"==typeof n&&(n=[[t.i,n,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};a(32)(n,o);n.locals&&(t.exports=n.locals)},419:function(t,e,a){},420:function(t,e,a){
/*!
 * MediaElement.js
 * http://www.mediaelementjs.com/
 *
 * Wrapper that mimics native HTML5 MediaElement (audio and video)
 * using a variety of technologies (pure JavaScript, Flash, iframe)
 *
 * Copyright 2010-2017, John Dyer (http://j.hn/)
 * License: MIT
 *
 */
!function t(e,a,n){function o(r,s){if(!a[r]){if(!e[r]){if(i)return i(r,!0);var l=new Error("Cannot find module '"+r+"'");throw l.code="MODULE_NOT_FOUND",l}var c=a[r]={exports:{}};e[r][0].call(c.exports,(function(t){var a=e[r][1][t];return o(a||t)}),c,c.exports,t,e,a,n)}return a[r].exports}for(var i=!1,r=0;r<n.length;r++)o(n[r]);return o}({1:[function(t,e,a){"use strict";mejs.i18n.en["mejs.ptoggle"]="Show/Hide Paragraph Jump Markers",Object.assign(mejs.MepDefaults,{ptoggleText:null}),Object.assign(MediaElementPlayer.prototype,{buildptoggle:function(t,e,a,n){var o=this,i=mejs.Utils.isString(o.options.ptoggleText)?o.options.ptoggleText:mejs.i18n.t("mejs.ptoggle"),r=document.createElement("div");r.className=o.options.classPrefix+"button "+o.options.classPrefix+"ptoggle-button "+o.options.classPrefix+"ptoggle",r.innerHTML='<button type="button" aria-controls="'+o.id+'" title="'+i+'" aria-label="'+i+'" tabindex="0"></button>',o.addControlElement(r,"ptoggle"),r.addEventListener("click",(function(){var t=mejs.Utils.createEvent("ptoggle",n);n.dispatchEvent(t)}))}})},{}]},{},[1])},421:function(t,e,a){var n=a(422);"string"==typeof n&&(n=[[t.i,n,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};a(32)(n,o);n.locals&&(t.exports=n.locals)},422:function(t,e,a){},423:function(t,e,a){
/*!
 * MediaElement.js
 * http://www.mediaelementjs.com/
 *
 * Wrapper that mimics native HTML5 MediaElement (audio and video)
 * using a variety of technologies (pure JavaScript, Flash, iframe)
 *
 * Copyright 2010-2017, John Dyer (http://j.hn/)
 * License: MIT
 *
 */
!function t(e,a,n){function o(r,s){if(!a[r]){if(!e[r]){if(i)return i(r,!0);var l=new Error("Cannot find module '"+r+"'");throw l.code="MODULE_NOT_FOUND",l}var c=a[r]={exports:{}};e[r][0].call(c.exports,(function(t){var a=e[r][1][t];return o(a||t)}),c,c.exports,t,e,a,n)}return a[r].exports}for(var i=!1,r=0;r<n.length;r++)o(n[r]);return o}({1:[function(t,e,a){"use strict";mejs.i18n.en["mejs.capture"]="Show/Hide Audio Capture Markers",Object.assign(mejs.MepDefaults,{capture:null}),Object.assign(MediaElementPlayer.prototype,{buildcapture:function(t,e,a,n){var o=this,i=mejs.Utils.isString(o.options.captureText)?o.options.captureText:mejs.i18n.t("mejs.capture"),r=document.createElement("div");r.className=o.options.classPrefix+"button "+o.options.classPrefix+"capture-button "+o.options.classPrefix+"capture",r.innerHTML='<button type="button" aria-controls="'+o.id+'" title="'+i+'" aria-label="'+i+'" tabindex="0"></button>',o.addControlElement(r,"capture"),r.addEventListener("click",(function(){var t=mejs.Utils.createEvent("capture",n);n.dispatchEvent(t)}))}})},{}]},{},[1])},494:function(t,e,a){"use strict";a.r(e);var n=a(3),o=a(11),i=a(5),r=a(52),s=a(40),l=a(53);var c=a(54),p=a(10),d=a(56),u=a(57),h=a(41),m=(a(396),a(400),a(403),a(405),a(406),a(408),a(409),a(411),a(412),a(414),a(415),a(417),a(418),a(420),a(421),a(423),a(8)),f=a.n(m),g=a(18),b=a.n(g),k=a(82),v=a.n(k);a(476);class y{constructor(t){this.data={base:t,time:[]},this.player=null}setPlayer(t){this.player=t}setData(t){this.data=t}setTimeArray(t){this.data.time=t}add(t){return this.data.time.push(t),this.data.time.length}remove(t){let e=v()(this.data.time,{id:t.id});return-1===e?-1:(this.data.time.splice(e,1),this.data.time.length)}length(){return this.data.time.length}getData(){return this.data}}var w=a(28),x=a.n(w),j=a(2);let I,z,C=!1,O=!1,T=!1,S=!1,E="",D="bullseye";let P=null,L=!1,B=!1;function N(){return new Promise((t,e)=>{L?L&&B?t(!0):$(".time-edit-modal.ui.modal").modal({dimmerSettings:{opacity:.5},closable:!1,onDeny:function(){t(!1)},onApprove:function(){if($("p.cmiTranPara").length!==P.length)return f.a.error(Object(j.a)("error:e1")),void t(!1);A(),W=!1,B=!0,t(!0)}}).modal("show"):t(!0)})}function q(t){"SAVE"===t?x.a.set("$captureData-"+location.pathname,I.getData()):"REMOVE"===t&&x.a.remove("$captureData-"+location.pathname)}function M(t,e=!0){S=!0,K(t,e)}function K(t,e=!0){var a=$("#"+t.id).children("i.timing");S&&(a.hasClass(D)?(a.removeClass(D).addClass("check"),I.add(t),e&&q("SAVE")):a.hasClass("bullseye")?(a.removeClass("bullseye").addClass("check"),I.add(t),e&&q("SAVE")):a.hasClass("check")&&(a.removeClass("check").addClass("bullseye"),I.remove(t),e&&q("SAVE")),S=!1)}function U(){let t=x.a.get("captureData-"+location.pathname);if(t){C=!0,I.setData(t),$("#captured-audio-data").html(JSON.stringify(t));let e=Object(i.b)();return e&&($("#captured-audio-name").val(e.name),$("#captured-audio-email").val(e.email)),$(".timecapture.ui.modal").modal("show"),!0}return!1}function _(){let t=$(".transcript.ui.text.container");t.hasClass("hide-timing")?N().then(e=>{e&&t.removeClass("hide-timing")}):t.addClass("hide-timing")}function A(){if(!U()&&!function(){let t=x.a.get("$captureData-"+location.pathname);if(t){x.a.remove("$captureData-"+location.pathname);for(let e in t.time)M(t.time[e]);let e=t.time[t.time.length-1];return z.setCurrentTime(e.seconds),f.a.info(Object(j.a)("notify:n6")),b()(document.getElementById(e.id)),!0}return!1}()&&!L){let t=$(".transcript p.cmiTranPara").first().attr("id");M(t?{id:t,seconds:0}:{id:"p0",seconds:0},!1)}}var R={initialize:function(t,e){e&&(L=!0,D="clock"),I=new y(location.pathname),I.setPlayer(t),z=t,$(".transcript.ui.text.container").addClass("hide-timing"),$("p.cmiTranPara").each((function(){$(this).prepend(`<i class='timing large circular red ${D} outline icon'></i>`)})),$(".transcript.ui.text.container").on("click","p.cmiTranPara > i.timing.icon",(function(t){t.preventDefault(),T?(S=!0,E=t.target.parentElement.id):f.a.info(Object(j.a)("notify:n1"))})),$(".timecapture.ui.modal").modal({dimmerSettings:{opacity:.5},closable:!1,onHide:function(){if(!C&&!O)return f.a.warning(Object(j.a)("notify:n2"),Object(j.a)("notify:n3"),{timeOut:1e4,closeButton:!0}),O=!0,!1}}),$("#audio-data-form").submit((function(t){t.preventDefault(),C=!0;let e=$(this);$.post(e.attr("action"),e.serialize()).done((function(){f.a.success(Object(j.a)("notify:n4")),$(".timecapture.ui.modal").modal("hide"),_(),x.a.remove("captureData-"+location.pathname)})).fail((function(t){f.a.error(Object(j.a)("notify:n5")),$("#audio-data-form .ui.message").addClass("negative").html(`<div class="header">${Object(j.a)("html:h1")}</div>\n           <p>${Object(j.a)("html:h2")}</p>`),$("#audio-form-submit").addClass("disabled"),x.a.set("captureData-"+location.pathname,I.getData())}))})),e?x.a.get("$captureData-"+location.pathname)?f.a.info(Object(j.a)("notify:n7")):x.a.get("captureData-"+location.pathname)&&(f.a.info(Object(j.a)("notify:n8")),U()):A()},toggleMarkers:_,play:function(){T=!0},pause:function(){T=!1},ended:function(){if(T=!1,L&&!B)return;if(!L&&1===I.length())return void q("REMOVE");let t=I.getData();B&&P.length!==t.time.length&&(t.time.forEach(t=>{let e=parseInt(t.id.substr(1),10);P[e]?(P[e].prevTime=P[e].seconds,P[e].seconds=t.seconds):(t.somethingFunny=!0,P.push(t))}),t.time=P),q("REMOVE");let e=$("p.cmiTranPara").length;e!==t.time.length&&$("#captured-audio-comments").val(`Incomplete data, there is data for ${t.time.length} of ${e} paragraphs`),$("#captured-audio-data").val(JSON.stringify(t));let a=Object(i.b)();a?($("#captured-audio-name").val(a.name),$("#captured-audio-email").val(a.email),$(".timecapture.ui.modal").modal("show")):$(".timecapture.ui.modal").modal("show")},setCurrentPlaybackTime:function(t){S&&K({id:E,seconds:t})}};let F=null,H=null,J=null,W=!0;const Z=new class{constructor(t=-1,e=-1){this.val=t,this.pval=e}get ptrVal(){return this.val}set ptrVal(t){this.val=t}get pVal(){return this.pval}set pVal(t){this.pval=t}set inc(t=1){this.val=this.val+t}}(-1,-1);let V,Q=!1,X=!1;function Y(t){let e,a;switch(t){case"NEXT":Z.val+1<F.length&&(e=tt(Z.val+1),et(Z.val+1),V.setCurrentTime(e));break;case"PREV":Z.val-1>=0&&(e=tt(Z.val-1),et(Z.val-1),V.setCurrentTime(e));break;default:a=parseInt(t.substr(1),10),e=tt(a),e>-1&&(et(a),V.setCurrentTime(e),V.paused&&V.play())}}function G(t){return Math.round(100*t)/100}function tt(t){if(t<0||t>=F.length)return 86400;{let e=F[t];return e.note&&f.a.info(e.note),F[t].seconds}}function et(t){Z.val=t,at(Z.val)}function at(t){var e=F[t];W&&b()(document.getElementById(e.id)),Z.pval>-1&&$("#"+F[Z.pval].id).removeClass("hilight"),$("#"+e.id).addClass("hilight"),Z.pval=t,H&&H({pid:e.id,startTime:e.seconds,nextStartTime:t<F.length?F[t+1].seconds:V.duration})}var nt=function(t,e,a){V=e,Object(p.a)(t).then(t=>{F=t.time.map(t=>(t.seconds=G(t.seconds),t)),$(".transcript.ui.text.container").addClass("hide-playmark"),$("p.cmiTranPara").each((function(){$(this).prepend("<i class='playmark play icon'></i>")})),$(".transcript.ui.text.container").on("click","p.cmiTranPara > i.playmark.icon",(function(t){t.preventDefault(),Y($(this).parent().attr("id"))})),"TIMER"===a&&function(t){P=t}(F)}).catch(e=>{f.a.error(`${Object(j.a)("error:e2")}: ${e.message}`),console.error("Failed to load timing data: %s, error: ",t,e)})},ot=function(t){var e;F&&(e=G(t),(-1===Z.val||e>tt(Z.val+1))&&(Z.inc=1,Q||at(Z.val))),J&&J(t)},it=function(){X&&(Z.val=-1,Z.pval=-1,Q=!1,X=!1)},rt=function(){},st=function(){F&&(X=!0,Z.pval>-1&&$("#"+F[Z.pval].id).removeClass("hilight"))};function lt(t,e,a){let n=!1;a&&(nt(a,t,e),$(".mejs__ptoggle").addClass("mejs-ptoggle-hidden")),"TIMER"===e&&(n=!0,R.initialize(t,a)),t.media.addEventListener("timeupdate",(function(){var e=t.getCurrentTime();a&&ot(e),n&&R.setCurrentPlaybackTime(e)})),t.media.addEventListener("playing",(function(){a&&it(),n&&R.play()})),t.media.addEventListener("ended",(function(){a&&st(),n&&R.ended()})),t.media.addEventListener("pause",(function(){a&&rt(),n&&R.pause()})),a&&(t.media.addEventListener("ptoggle",(function(){!function(){let t=$(".transcript.ui.text.container");return t.hasClass("hide-playmark")?(t.removeClass("hide-playmark"),!0):(t.addClass("hide-playmark"),!1)}()?$(".mejs__ptoggle").addClass("mejs-ptoggle-hidden").removeClass("mejs-ptoggle-visible"):$(".mejs__ptoggle").addClass("mejs-ptoggle-visible").removeClass("mejs-ptoggle-hidden")})),t.media.addEventListener("prevp",(function(){Y("PREV")})),t.media.addEventListener("nextp",(function(){Y("NEXT")}))),n&&t.media.addEventListener("capture",(function(){R.toggleMarkers()}))}function ct(){let t=Object(i.b)();if(!t)return"LISTENER";if(!t.roles)return"LISTENER";let e=t.roles.find(t=>"timer"===t),a=t.roles.find(t=>"editor"===t);if(!e&&!a)return"LISTENER";let n=Object(p.e)(location.pathname);return n?n===t.email||a?"TIMER":"LISTENER":"TIMER"}var pt=function(t,e){$("audio.mejs-player").attr("src",t);const{status:a,features:n}=function(t){let e={status:ct(),features:[]};return"LISTENER"===e.status?e.features=t?["playpause","current","duration","prevp","nextp","ptoggle","speed"]:["playpause","current","duration","skipback","jumpforward","speed"]:e.features=t?["playpause","current","duration","prevp","nextp","ptoggle","capture","speed"]:["playpause","current","duration","skipback","jumpforward","capture","speed"],e}(e);$("#cmi-audio-player").mediaelementplayer({pluginPath:"/public/vendor/mediaelement/plugin/",skipBackInterval:15,jumpForwardInterval:15,timeFormat:"h:mm:ss",features:n,error:function(t){f.a.error("Audio error: ",t)},success:function(t,n,o){lt(o,a,e)}})};var dt=function(){let t=Object(p.b)(location.pathname);t.audio&&(!function(t){$(".audio-player-toggle").attr("href",t)}(`${t.audioBase}${t.audio}`),$(".audio-player-toggle.hide").removeClass("hide"),$(".audio-player-toggle").on("click",t=>{t.preventDefault();let e=$(".audio-player-wrapper");e.hasClass("hide")?e.removeClass("hide"):e.addClass("hide")}),pt(`${t.audioBase}${t.audio}`,t.timing))},ut=a(58),ht=a(55);var mt=function(t){let e=$("form#"+t);e.length>0&&(!function(t){let e=Object(i.b)();e&&t.form("set values",{name:e.name,email:e.email}),t.submit((function(t){t.preventDefault();let e=$(this),a=e.form("get values"),n=!1;if(0===a.name.trim().length&&(f.a.warning(Object(j.a)("error:e7")),n=!0),0===a.email.trim().length&&(f.a.warning(Object(j.a)("error:e8")),n=!0),0===a.message.trim().length&&(f.a.warning(Object(j.a)("error:e9")),n=!0),n)return!1;$.post(e.attr("action"),e.serialize()).done((function(){f.a.success(Object(j.a)("error:e10"))})).fail((function(t){f.a.error(Object(j.a)("error:e11"))}))}))}(e),console.log("Form %s initialized.",t))},ft=a(0),gt=a(7);$(document).ready(()=>{Object(n.b)(gt.a),Object(ft.c)(gt.a),Object(s.c)("pnDisplay"),i.a.initialize(),r.a.initialize(),ut.a.initialize(),Object(l.a)(ht.a),Object(c.a)(),mt("droga-mistrzostwa-kontakt"),0!==$("#acq-video").length&&$(".ui.embed").embed(),Object(p.f)(Object(h.b)()).then(t=>{u.a.initialize(),h.a.initialize("transcript"),dt(),Object(o.e)(),Object(d.a)("transcript")}).catch(t=>{console.error(t)})})},5:function(t,e,a){"use strict";a.d(e,"b",(function(){return d}));var n=a(15),o=a.n(n),i=a(74),r=a.n(i),s=a(14),l=a.n(s),c=(a(11),a(0));let p;function d(t){return p?{email:p.email,userId:r()(p.email),name:p.user_metadata.full_name,roles:p.app_metadata.roles,avatar_url:p.user_metadata.avatar_url}:null}function u(t){let e=l.a.get("cmi.login.state")||"init";switch(t){case"init":case"dialog":l.a.set("cmi.login.state",t);break;case"login":"dialog"===e&&p.app_metadata.roles&&p.app_metadata.roles.find(t=>"acol"===t)&&location.pathname.startsWith("/t/acol/")&&"/t/acol/"!==location.pathname&&(location.href="/t/acol/"),l.a.set("cmi.login.state",t)}}e.a={initialize:function(){o.a.on("init",t=>{u("init")}),o.a.on("login",t=>{p=t,function(){let t=d();Object(c.b)("action:signout",!0,"Sign Out").then(e=>{$(".login-menu-option-guest").addClass("hide"),$(".login-menu-option-account").removeClass("hide"),$(".account-signout-option").text(`${e}: ${t.name}`)}),$(".main.menu a > span > i.bookmark.icon").addClass("green").removeClass("red"),$(".main.menu .ui.text.container").addClass("signed-in"),$(".hide.profile-management.item").removeClass("hide"),$(".requires-signin").removeClass("hide")}(),u("login")}),o.a.on("logout",()=>{Object(c.b)("action:signin",!0).then(t=>{$(".login-menu-option-guest").removeClass("hide"),$(".login-menu-option-account").addClass("hide")}),$(".main.menu a > span > i.bookmark.icon").addClass("red").removeClass("green"),$(".main.menu .ui.text.container").removeClass("signed-in"),$(".profile-management.item").addClass("hide"),$(".requires-signin").addClass("hide"),p=null,location.href="/"}),o.a.on("error",t=>{console.error("user.on('error'): ",t)}),$(".login-menu-option-account > .menu > .account-signout-option").on("click",t=>{t.preventDefault(),o.a.logout()}),$(".login-menu-option-guest").on("click",t=>{t.preventDefault(),u("dialog"),o.a.open()}),o.a.init({})}}},52:function(t,e,a){"use strict";e.a={initialize:()=>{$.ajax({url:"//connect.facebook.net/en_US/sdk.js",dataType:"script",cache:!0,success:function(){FB.init({appId:"448658485318107",xfbml:!0,version:"v3.1"})}})}}},53:function(t,e,a){"use strict";a.d(e,"a",(function(){return s}));var n=a(6),o=a.n(n);let i;function r(t){const e=i[t];i.__current__!==t&&(e.title&&$(".notes.modal .notes-title").text(e.title),e.image&&$(".notes.modal .notes-image").attr("src",e.image),e.content&&$(".notes.modal .notes-content").html(e.content)),i.__current__=t,$(".notes.ui.modal").modal("show")}function s(t={}){i=t,i.__current__="__nonote",$(".notes.ui.modal").modal({dimmerSettings:{opacity:.5},observeChanges:!0}),$(".notes-modal-open").on("click",t=>{t.preventDefault();let e=$(t.currentTarget).attr("data-note");i[e]?i[e].contents?r(e):o()({method:"get",url:i[e].url,responseType:"text"}).then(t=>{i[e].content=t.data,r(e)}).catch(t=>{console.error("Error fetching note: %s",e,t)}):console.log("Note %s not found in notes configuration",e)})}},54:function(t,e,a){"use strict";a.d(e,"a",(function(){return i}));var n=a(7),o=a(10);function i(){return Object(o.g)(n.a),n.a.env}},55:function(t,e,a){"use strict";a.d(e,"a",(function(){return o}));var n=a(7);const o={studyguide:{url:""+("standalone"===n.a.env?"/notes/advice/":n.a.url_prefix+"/notes/advice/"),title:"Sugestie do praktyki"},path:{url:""+("standalone"===n.a.env?"/notes/path/":n.a.url_prefix+"/notes/path/"),title:"Ścieżka Drogi Mistrzostwa"}}},56:function(t,e,a){"use strict";a.d(e,"a",(function(){return ye}));var n=a(6),o=a.n(n),i=a(9),r=a(22),s=a.n(r);function l(t){"string"!=typeof t&&(t=t.toString(10));let e=t.indexOf(".");if(-1===e)return t+".001";let a=t.substr(0,e),n=t.substr(e+1);return`${a}.${n}${2===n.length?"0":1===n.length?"00":""}`}function c(t,e){return new Promise((a,n)=>{o.a.get(`${i.a.user}/queryAnnotation/${t}/${e}`).then(t=>{let e=t.data.response;e.forEach(t=>{t.pid=parseInt(t.annotation.rangeStart.substring(1),10),t.annotation.userId=t.userId,t.annotation.creationDate=t.creationDate,t.annotation.selectedText&&(t.annotation.selectedText=JSON.parse(t.annotation.selectedText))}),e.sort((t,e)=>t.paraKey-e.paraKey),a(e)}).catch(t=>{n(t)})})}function p(t,e,a,n){"string"!=typeof a&&(a=a.toString(10)),"string"!=typeof e&&(e=e.toString(10));let r={userId:t,paraKey:e,creationDate:a,annotation:n};return new Promise((t,e)=>{o.a.post(i.a.user+"/annotation",r).then(e=>{t(e.data.response)}).catch(t=>{e(t)})})}var d=a(5),u=a(3),h=a(33),m=a.n(h),f=a(0);let g=!1;function b(){if(!g)return $("#bookmark-filter-wrapper").removeClass("hide"),$("#page-topics-modal").modal({dimmerSettings:{opacity:.5},autofocus:!1,centered:!0,duration:400,inverted:!0,observeChanges:!0,transition:"horizontal flip",onShow:function(){!function(){if(!Vt.topicRefreshNeeded)return;let t=function(){let t=Vt.getTopics(),e=Array.from(t.keys()).map(e=>t.get(e));return e.sort((t,e)=>t.value<e.value?-1:t.value>e.value?1:0),function(t){return`\n    <select name="pageTopicList" id="page-topics-topic-list" class="search ui dropdown">\n      <option value="">Choose a topic</option>\n      ${t.map(t=>""+function(t){return`<option value="${t.value}">${t.topic}</option>`}(t)).join("")}\n    </select>\n  `}(e)}();$("#page-topics-modal-topic-select").html(t),$("#page-topics-topic-list").dropdown(),$("#page-topics-modal-loading").removeClass("active").addClass("disabled"),Vt.topicRefreshNeeded=!1}()},onVisible:function(){},onHidden:function(){}}),$("#page-topics-modal-open").on("click",t=>{t.preventDefault(),$("#page-topics-modal").modal("show")}),$("#page-topics-filter-submit").on("click",(function(t){t.preventDefault();let e=$("#page-topics-filter-form").form("get value","pageTopicList");!function(t){if($(".transcript").hasClass("topic-filter-active")){let e=$("#current-topic-filter").attr("data-filter");if(e===t.value)return;$("mark.bookmark-selected-text."+e).removeClass("show")}else $(".transcript").addClass("topic-filter-active");$("mark.bookmark-selected-text."+t.value).addClass("show"),$("#current-topic-filter").html(`Topic Filter: <span class="red">${t.topic}</span>`),$("#current-topic-filter").attr("data-filter",t.value),$("#bookmark-dropdown-menu > span i.bookmark-icon").eq(0).removeClass("green").addClass("yellow"),$("#page-topics-modal").modal("hide")}({value:e,topic:$(`#page-topics-topic-list > [value='${e}']`).text()})})),$(".page-topics-filter-reset").on("click",(function(t){if(t.preventDefault(),$(".transcript").hasClass("topic-filter-active")){let t=$("#current-topic-filter").attr("data-filter");$("mark.bookmark-selected-text."+t).removeClass("show")}$(".transcript").removeClass("topic-filter-active"),$("#page-topics-topic-list").dropdown("clear"),$("#current-topic-filter").html(Object(f.b)("label:topicfilter")+": None"),$("#current-topic-filter").attr("data-filter",""),$("#bookmark-dropdown-menu > span  i.bookmark-icon").eq(0).removeClass("yellow").addClass("green")})),void(g=!0);$("#bookmark-filter-wrapper").removeClass("hide")}class k{constructor(t,e){this.list=t,this.topics=new Map,this.topicsModified=!1,this.sharePid=e,this._initTopics()}_incrementTopic(t,e=!1){let a=this.topics.size,n=t.value;if(this.topics.has(n)){let t=this.topics.get(n);t.count+=1,this.topics.set(n,t)}else t.count=1,this.topics.set(n,t),this.topicsModified=!0;0!==a||e||b()}_decrementTopic(t){let e=t.value;if(!this.topics.has(e))return;let a=this.topics.get(e);1===a.count?(this.topics.delete(e),this.topicsModified=!0):(a.count-=1,this.topics.set(e,a)),0===this.topics.size&&$("#bookmark-filter-wrapper").addClass("hide")}_initTopics(){this.list.forEach(t=>{ne("loaded",t,this.sharePid),t.annotation.selectedText&&t.annotation.topicList&&t.annotation.topicList.length>0&&t.annotation.topicList.forEach(t=>{this._incrementTopic(t,!0)})}),this.topicsModified=!0}_invalidateBmList(){let t=Object(u.a)("bmList");t&&(t.lastBuildDate=0,Object(u.c)("bmList",t))}getTopics(){return this.topics}get topicRefreshNeeded(){return this.topicsModified}set topicRefreshNeeded(t){this.topicsModified=t}getCreationDate(t){let e=this.list.find(e=>!(!e.annotation.aid||e.annotation.aid!==t));return e?e.creationDate:e}getItem(t,e){let a=parseInt(t.substr(1),10);return this.list.filter(t=>t.pid===a).find(t=>e?t.annotation.aid?t.annotation.aid===e:t.annotation.creationDate==e:void 0===t.annotation.aid)}addItem(t,e,a,n){let o=n.rangeStart,i=parseInt(o.substr(1),10);if("new"===n.status){n.creationDate=a;let o={userId:t,paraKey:""+e,creationDate:""+a,pid:i,annotation:n};this.list.push(o),o.annotation.selectedText&&o.annotation.topicList&&o.annotation.topicList.forEach(t=>{this._incrementTopic(t)}),this._invalidateBmList(),ne("created",o,this.list.filter(t=>t.pid===i).length-1)}else{let t=""+e,o=""+a,i=this.list.findIndex(e=>e.paraKey===t&&e.creationDate===o);if(-1===i)throw new Error("localStore: addItem:update: bookmark to update not found in list");if(n.selectedText){let t=[],e=[];if(n.topicList){let e=n.topicList.reduce((t,e)=>`${t} ${e.value}`,"");e=e.trim(),t=e.split(" ")}if(this.list[i].annotation.topicList){let t=this.list[i].annotation.topicList.reduce((t,e)=>`${t} ${e.value}`,"");t=t.trim(),e=t.split(" ")}let a=m()(t,e),o=m()(e,t);a.forEach(t=>{let e=n.topicList.find(e=>e.value===t);this._incrementTopic(e)}),o.forEach(t=>{let e=this.list[i].annotation.topicList.find(e=>e.value===t);this._decrementTopic(e)})}this.list[i].annotation=n,ne("updated",this.list[i])}}deleteItem(t,e,a){"string"!=typeof e&&(e=""+e),"string"!=typeof a&&(a=""+a);let n=this.list.findIndex(n=>n.userId===t&&n.paraKey===e&&n.creationDate===a),o=!1;if(n>-1){let t=this.list[n],e=t.pid;this.list[n].annotation.topicList&&this.list[n].annotation.topicList.forEach(t=>{o=this._decrementTopic(t)||o}),this.list.splice(n,1),this._invalidateBmList();let a=this.list.filter(t=>t.pid===e);return ne("deleted",t,a.length),{remainingCount:a.length,modified:o}}return{remainingCount:null,modified:o}}itemCount(t,e){if(!e)return 0;let a=parseInt(t.substr(1),10);return this.list.filter(t=>t.pid===a).reduce((t,a)=>(a.annotation.aid&&a.annotation.aid!==e&&(t+=1),t),0)}}var v=a(21),y=a(4),w=a.n(y),x={};var j={fetchTopics:function(){const t=Object(d.b)();let e=Object(u.a)("bmTopics");return new Promise((a,n)=>{if(e&&e.lastFetchDate+72e5>Date.now())return void a(e);let r=x.sourceId.toString(10);(function(t,e){return new Promise((a,n)=>{o.a.get(`${i.a.user}/topicList/${t}/${e}`).then(t=>{let e=t.data.topics;a(e)}).catch(t=>{n(t)})})})(t.userId,r).then(t=>{let e={lastFetchDate:Date.now(),topics:t};Object(u.c)("bmTopics",e),a(e)}).catch(t=>{console.error("Error fetching topicList: ",t),n(t)})})},deleteAnnotation:function(t,e){const a=Object(d.b)();return new Promise(async(n,r)=>{const s=x.keyInfo.genParagraphKey(t);try{await function(t,e,a){return"string"!=typeof a&&a.toString(10),new Promise((n,r)=>{o.a.delete(`${i.a.user}/annotation/${t}/${l(e)}/${a}`).then(t=>{n(t.data.response)}).catch(t=>{r(t)})})}(a.userId,s,e);n(Vt.deleteItem(a.userId,s,e).remaining)}catch(t){r(t)}})},postAnnotation:function(t,e,a=!0){const n=Object(d.b)();let o,i=Date.now(),r=s()(t);r.modified&&delete r.modified,r.selectedText&&(o=r.selectedText.wrap,delete r.selectedText.wrap,"string"!=typeof r.selectedText&&(r.selectedText.aid||(r.selectedText.aid=i.toString(10)),r.selectedText=JSON.stringify(r.selectedText)));let l=r.creationDate?r.creationDate:i;return e||(e=x.keyInfo.genParagraphKey(r.rangeStart)),p(n.userId,e,l,r).then(t=>{a&&(r.selectedText&&(r.selectedText=JSON.parse(r.selectedText),o&&(r.selectedText.wrap=o)),Vt.addItem(n.userId,e,l,r))}).catch(t=>{console.error("Error saving annotation: "+t),w.a.error(Object(f.b)("error:e1"))}),l}},I=a(77),z=a.n(I),C=a(78),O=a.n(C),T=a(11),S=a(79),E=a.n(S),D=a(26),P=a.n(D),L=a(17),B=a.n(L),N=a(13),q=a.n(N),M=a(23);let K={},U={};function _(t){K=t,$("form[name='emailshare']").on("submit",(async function(t){t.preventDefault();const e=Object(d.b)();if(!e)return w.a.warning(Object(f.b)("annotate:m14")),void $(".email-share-dialog-wrapper").addClass("hide");let a=$("#email-share-form").form("get values");if(0!==a.mailList.length||0!==a.emailAddresses.length){if(U.to="",a.mailList.length>0){let t=function(t){let e=[],a={};return t.forEach(t=>{let[n,o,i]=t.split(":");e.push(n),a[n]={first:""===o?"No First Name":o,last:""===i?"No Last Name":i}}),{to:e.join(","),variables:JSON.stringify(a)}}(a.mailList);U.to=t.to,U.variables=t.variables}a.emailAddresses.length>0&&(U.to.length>0?U.to=`${U.to}, ${a.emailAddresses}`:U.to=a.emailAddresses),U.senderName=e.name,U.senderEmail=e.email,U.sid=K.sid,a.emailMessage&&(U.message=function(t){let e=(t=(t=t.replace(/\n/g,"@@")).replace(/@@*/g,"@@")).split("@@");return t=e.reduce((t,e)=>`${t}<p>${Object(v.a)(e)}</p>`,"")}(a.emailMessage)),$(".email-share-dialog-wrapper").addClass("hide");try{"success"===await Object(M.b)(U)?w.a.info(Object(f.b)("action:emailsent")):w.a.info(response.data.message)}catch(t){w.a.error(t)}}else w.a.info(Object(f.b)("error:e9"))})),$("form[name='emailshare'] .email-share-cancel").on("click",(function(t){t.preventDefault(),$(".email-share-dialog-wrapper").addClass("hide")}))}function A(t){return new Promise((e,a)=>{let n=Object(f.b)("label:listnames",!0),o=Object(f.b)("label:selectaddress",!0);Promise.all([n,o]).then(a=>{e(`\n        <label>${a[0]}</label>\n        <select name="mailList" id="maillist-address-list" multiple="" class="search ui dropdown">\n          <option value="">${a[1]}</option>\n          ${t.map(t=>""+function(t){return`<option value="${t.address}:${t.first}:${t.last}">${t.first} ${t.last}</option>`}(t)).join("")}\n        </select>\n      `)})})}let R=!1;var F=a(12);let H,J={},W=!1;function Z(t){return t&&0!==t.length?`\n    <div class="ui horizontal bulleted list">\n      ${t.map(t=>`\n        <div class="item">\n          <em>${"object"==typeof t?t.topic:t}</em>\n        </div>\n      `).join("")}\n    </div>\n  `:Object(f.b)("annotate:m13")}function V(t,e,a,n){return`\n    <div class="ui list">\n      <div class="item">\n        <i class="bookmark icon"></i>\n        <div class="content">\n          <div class="header">\n            ${n}: ${t}\n          </div>\n          <div class="list">\n            ${e.map(t=>`\n              ${function(t,e=[]){let a;t.topicList||(t.topicList=[]);let n=t.topicList.map(t=>t.value);return e.length>0&&(a=E()(n,e)),0===e.length||a.length>0?`\n      <div class="item"> \x3c!-- item: ${t.rangeStart}/${t.rangeEnd} --\x3e\n        <i class="right triangle icon"></i>\n        <div class="content">\n          <div class="header">\n            ${Z(t.topicList)}\n          </div>\n          <div class="description">\n            <a data-aid="${t.aid}" class="annotation-item" data-range="${t.rangeStart}/${t.rangeEnd}">\n              ${t.Comment?t.Comment:Object(f.b)("annotate:m7")}\n            </a>\n          </div>\n        </div>\n      </div> \x3c!-- item: ${t.rangeStart}/${t.rangeEnd} --\x3e\n    `:`\x3c!-- annotation filtered: ${e.join(" ")} --\x3e`}(t,a)}\n            `).join("")}\n          </div>\n        </div>\n      </div>\n    </div>\n `}function Q(t,e,a){let n,o=t[e][a];return n=o[0].selectedText?`${o[0].selectedText.url}?bkmk=${o[0].rangeStart}`:`${"integration"===J.env?J.url_prefix:""}${J.keyInfo.getUrl(e)}?bkmk=${o[0].rangeStart}`,n}function X(t,e,a){let n=Object.keys(e),o=n.indexOf("lastFetchDate");if(o>-1&&n.splice(o,1),o=n.indexOf(t),-1===o)return Promise.reject("bookmark not found");let i=function(t,e,a,n){if(t>e.length)return Promise.resolve(null);let o,i,r=!1;t:for(o=t;o<e.length;o++){let t=n[e[o]];for(i in t)for(let e=0;e<t[i].length;e++){if(!a||0===a.length){r=!0;break t}if(P()(a,t[i][e].topicList||[],(t,e)=>t===e.value).length>0){r=!0;break t}}}return new Promise(t=>{if(r){let a=e[o],r=Q(n,a,i);if(r)return void t(r);t(null)}else t(null)})}(o+1,n,a.modal.topics,e),r=function(t,e,a,n){if(t<0)return Promise.resolve(null);let o,i,r=!1;t:for(o=t;o>=0;o--){let t=n[e[o]];for(i in t)for(let e=0;e<t[i].length;e++){if(!a||0===a.length){r=!0;break t}if(P()(a,t[i][e].topicList||[],(t,e)=>t===e.value).length>0){r=!0;break t}}}return new Promise(t=>{if(r){let a=e[o];t(Q(n,a,i))}else t(null)})}(o-1,n,a.modal.topics,e);return Promise.all([r,i])}function Y(t,e,a,n,o){let i,r,s=[];n.modal.filter&&(s=n.modal.topics,r=Z(n.modal.fullTopic)),i=(parseInt(e.substr(1),10)+1).toString(10);let l=a[t][i];if(!l)return!1;Object(f.b)("label:para",!0).then(t=>{let a=V(e,l,s,t);$("#bookmark-content").html(a)}),r?($("#filter-topics-section").removeClass("hide"),$(".bookmark-navigator-filter").html(r)):$("#filter-topics-section").addClass("hide"),$(".bookmark-navigator-header-book").text($("#book-title").text());let c,p,d=Object.keys(a[t]),u=d.indexOf(i);return c=function(t,e,a,n){if(t<1)return null;if(0===n.length)return"p"+(parseInt(e[t-1],10)-1).toString(10);for(let o=t-1;o>=0;o--){let t=a[e[o]];for(let a=0;a<t.length;a++)if(t[a].topicList&&t[a].topicList.length>0){if(P()(t[a].topicList,n,(t,e)=>t.value===e).length>0)return"p"+(parseInt(e[o],10)-1).toString(10)}}return null}(u,d,a[t],s),p=function(t,e,a,n){if(t+1===e.length)return null;if(0===n.length)return"p"+(parseInt(e[t+1],10)-1).toString(10);for(let o=t+1;o<e.length;o++){let t=a[e[o]];for(let a=0;a<t.length;a++)if(t[a].topicList&&t[a].topicList.length>0){if(P()(t[a].topicList,n,(t,e)=>t.value===e).length>0)return"p"+(parseInt(e[o],10)-1).toString(10)}}return null}(u,d,a[t],s),$(".bookmark-navigator .current-bookmark").attr("data-pid",""+e),Object(f.b)("action:prev",!0).then(t=>{c?($(".bookmark-navigator .previous-bookmark").attr("data-pid",c),$(".bookmark-navigator .previous-bookmark").removeClass("inactive"),$(".bookmark-navigator .previous-bookmark").html(`<i class="up arrow icon"></i> ${t} (${c})`)):($(".bookmark-navigator .previous-bookmark").addClass("inactive"),$(".bookmark-navigator .previous-bookmark").html("<i class='up arrow icon'></i>"+t))}),Object(f.b)("action:next",!0).then(t=>{p?($(".bookmark-navigator .next-bookmark").attr("data-pid",p),$(".bookmark-navigator .next-bookmark").removeClass("inactive"),$(".bookmark-navigator .next-bookmark").html(`<i class="down arrow icon"></i> ${t} (${p})`)):($(".bookmark-navigator .next-bookmark").addClass("inactive"),$(".bookmark-navigator .next-bookmark").html("<i class='down arrow icon'></i> "+t))}),!0}function G(t){J.keyInfo.getSourceId();let e=J.keyInfo.genPageKey().toString(10),a=Object(u.a)("bmList"),n=Object(u.a)("bmModal");a&&(H=e,X(e,a,n).then(o=>{null!==o[0]?$(".bookmark-navigator .previous-page").attr({href:o[0]}):$(".bookmark-navigator .previous-page").addClass("inactive").removeAttr("href"),null!==o[1]?$(".bookmark-navigator .next-page").attr({href:o[1]}):$(".bookmark-navigator .next-page").addClass("inactive").removeAttr("href"),Y(e,t,a,n)?($(".bookmark-navigator .previous-bookmark").on("click",(function(t){t.preventDefault(),et();let e=$(this).attr("data-pid");q()(document.getElementById(e),{align:{top:.2}},t=>{}),tt(e,"previous")})),$(".bookmark-navigator .next-bookmark").on("click",(function(t){t.preventDefault(),et();let e=$(this).attr("data-pid");q()(document.getElementById(e),{align:{top:.2}},t=>{}),tt(e,"next")})),$(".bookmark-navigator .current-bookmark").on("click",(function(t){t.preventDefault();let e=$(this).attr("data-pid");q()(document.getElementById(e),{align:{top:.2}},t=>{})})),$(".bookmark-navigator .close-window").on("click",(function(t){t.preventDefault(),et(),$(".bookmark-navigator-wrapper").addClass("hide-bookmark-navigator"),$(".transcript").removeClass("bookmark-navigator-active")})),$(".bookmark-navigator").on("click",".annotation-item",(function(t){t.preventDefault(),et();let e=Object(d.b)();e||(e={userId:"xxx"});let a,n=$(this).attr("data-aid"),o=$(this).attr("data-range").split("/"),i=o[0];"undefined"!==n?(a=$(`[data-annotation-id='${n}']`).attr("data-aid"),$(`[data-annotation-id="${a}"]`).addClass("show")):a=$(`#${i} > span.pnum`).attr("data-aid");let r,s=`${location.origin}${location.pathname}?as=${i}:${a}:${e.userId}`,l=o.map(t=>parseInt(t.substr(1),10)),c=B()(l[0],l[1]+1);r="xxx"===e.userId?`\n        <h4 class="ui header">\n          <i title="${Object(f.b)("annotate:m11")}" class="red window close outline icon"></i>\n          <div class="content">\n            ${$(this).text()}\n          </div>\n        </h4>\n      `:f.a`
        <h4 class="ui header">
          <i title="${"action:fbshare"}" class="share-annotation facebook icon"></i>
          <i title="${"action:emailshare"}" class="share-annotation envelope outline icon"></i>
          <i data-clipboard-text="${s}" title="${"action:cp2clip"}" class="share-annotation linkify icon"></i>
          <div class="content">
            ${$(this).text()}
          </div>
        </h4>
      `;for(let t=0;t<c.length;t++)$("#p"+c[t]).addClass("selected-annotation");$(".selected-annotation").wrapAll("<div class='selected-annotation-wrapper ui raised segment'></div>"),$(".selected-annotation-wrapper").prepend(r),"xxx"!==e.userId&&F.a.register(".share-annotation.linkify")})),nt("bookmark/navigator.js"),$(".transcript").addClass("bookmark-navigator-active"),$(".bookmark-navigator-wrapper").removeClass("hide-bookmark-navigator"),setTimeout(at,250,t,"bookmarkManager")):Object(f.b)("fragment:f1",!0).then(e=>{w.a.info(f.a`${e} ${t} ${"fragment:f2"}`)})}).catch(e=>{console.error(e),"bookmark not found"===e&&Object(f.b)("fragment:f1",!0).then(e=>{w.a.info(`${e} ${t} ${Object(f.b)("fragment:f2")}`)})}))}function tt(t,e){let a=Object(u.a)("bmList"),n=Object(u.a)("bmModal");Y(H,t,a,n)}function et(){let t=$(".selected-annotation");if(t.length>0){$(".selected-annotation-wrapper > .header").remove(),t.unwrap().removeClass("selected-annotation"),$(".bookmark-selected-text.show").removeClass("show");let e=$("div.transcript.ui.disable-selection:not(.user)");e.length>0&&e.removeClass("disable-selection")}}function at(t,e){q()(document.getElementById(t),{align:{top:.2}},t=>{})}function nt(t){W||($(".transcript").on("click",".selected-annotation-wrapper .share-annotation",(function(t){t.preventDefault();let e,a,n,o=$(".selected-annotation-wrapper mark.show");if($(this).hasClass("close"))return void et();if(e=Object(d.b)(),!e)return void w.a.info(Object(f.b)("annotate:m14"));let i,r=$(".selected-annotation-wrapper i[data-clipboard-text]").attr("data-clipboard-text"),s=r.indexOf("undefined");if($(this).hasClass("facebook"))i="facebook";else if($(this).hasClass("envelope"))i="email";else if($(this).hasClass("linkify"))return s>-1?void w.a.error(Object(f.b)("error:e5")):void(i="clipboard");a=$(".selected-annotation-wrapper p").attr("id"),0===o.length?(n=$(".selected-annotation-wrapper > p").text(),n=function(t,e){let a="email"===t?"@@":"\n\n",n=(e=(e=(e=e.replace(/[^\x20-\x7E]/g," ")).replace(/ {2,}/g," ")).replace(/\(p\d*\)/g,t=>`${a}${t}`)).split(a);return 0===n[0].length&&n.shift(),e="email"===t?n.reduce((t,e)=>`${t}\n<p>${e}</p>`,""):n.join("\n")}(i,n)):n=o.text().replace(/\n/," ");let l=`~ ${$("#src-title").text()}: ${$("#book-title").text()}`;if("facebook"===i){if(s>-1)return void w.a.error(Object(f.b)("error:e5"));let t={method:"share",hashtag:"#christmind",quote:`${n}\n${l}`,href:r};FB.ui(t,(function(){}))}else if("email"===i){if(s>-1)return void w.a.error(Object(f.b)("error:e5"));!async function(t,e,a){const n=Object(d.b)();if(U={citation:e,quote:t,url:a},$(".hide.email-share-dialog-wrapper").removeClass("hide"),!R)try{$(".email-share-loader").addClass("active");let t=await Object(M.a)(n.userId),e=await A(t);$("#maillist-select").html(e),$("#maillist-address-list.dropdown").dropdown(),R=!0,$(".email-share-loader").removeClass("active")}catch(t){w.a.error(`${Object(f.b)("error:e10")}: ${t}`)}}(n,l,r)}})),W=!0)}var ot=a(42),it=a.n(ot),rt=a(43),st=a.n(rt);let lt={};function ct(t,e,a,n){if(0===e.length)return`\n      <div class="bookmark-item item"> \x3c!-- ${t} --\x3e\n        <i class="bookmark icon"></i>\n        <div class="content">\n          <div class="header">\n            <a href="${a}?bkmk=${t}">${Object(f.b)("label:para")}: ${t}</a>\n          </div>\n        </div>\n      </div> \x3c!-- item: ${t} --\x3e\n    `;return`\n    <div class="${n.reduce((t,e)=>"object"==typeof e?`${t} ${e.value}`:`${t} ${e}`,"")} bookmark-item item"> \x3c!-- ${t} --\x3e\n      <i class="bookmark icon"></i>\n      <div class="content">\n        <div class="header">\n          <a href="${a}?bkmk=${t}">${Object(f.b)("label:para")}: ${t}</a>\n        </div>\n        <div class="list">\n          ${e.map(t=>{return`\n            <div class="item"> \x3c!-- item: ${t.rangeStart}/${t.rangeEnd} --\x3e\n              <i class="right triangle icon"></i>\n              <div class="content">\n                <div class="header">\n                  ${e=t.topicList,e&&0!==e.length?`\n    <div class="ui horizontal bulleted list">\n      ${e.map(t=>`\n        <div class="item">\n          <em>${"object"==typeof t?t.topic:t}</em>\n        </div>\n      `).join("")}\n    </div>\n  `:Object(f.b)("annotate:m13")}\n                </div>\n                <div class="description">\n                  ${t.Comment?t.Comment:Object(f.b)("annotate:m7")}\n                </div>\n              </div>\n            </div> \x3c!-- item: ${t.rangeStart}/${t.rangeEnd} --\x3e\n          `;var e}).join("")}\n        </div>\n      </div>\n    </div> \x3c!-- item: ${t} --\x3e\n  `}function pt(t){return`\n    ${t.map(t=>`\n      <div class="item"> \x3c!-- item: ${t.title} --\x3e\n        <i class="file icon"></i>\n        <div class="content">\n          <div class="header">\n            ${function(t){let e=""+t.title;return t.subTitle&&(e=`${e}: ${t.subTitle}`),e}(t)}\n          </div>\n          <div class="list">\n            ${function(t,e){let a="";for(let n in t)if(!n.startsWith("tpList")){a+=ct("p"+(parseInt(n,10)-1).toString(10),t[n],e,t["tpList"+n])}return a}(t.bookmarks,t.url)}\n          </div>\n        </div>\n      </div>\n    `).join("")}\n  `}function dt(t){let e,a=!0,n=[],o=$(".cmi-bookmark-list").attr("data-lbd");if(o){if(o=parseInt(o,10),o===t.lastBuildDate)return;a=!1}$(".cmi-bookmark-list").attr("data-lbd",t.lastBuildDate);for(let e in t)"lastFetchDate"!==e&&"lastBuildDate"!==e&&n.push(lt.getPageInfo(e,t[e]));Promise.all(n).then(t=>{let{bookArray:n,topics:o}=function(t){let e={},a=[];t.forEach(t=>{e[t.bookId]||(e[t.bookId]={},e[t.bookId].bookId=t.bookId,e[t.bookId].bookTitle=t.bookTitle,t.subTitle&&(e[t.bookId].subTitle=t.subTitle),e[t.bookId].pages=[]);let a={pageKey:t.pageKey,title:t.title,url:t.url,bookmarks:t.data};t.subTitle&&(a.subTitle=t.subTitle),e[t.bookId].pages.push(a)}),t.forEach(t=>{e[t.bookId]&&(a.push(e[t.bookId]),delete e[t.bookId])});let n=[];a.forEach(t=>{t.pages.forEach(t=>{for(let e in t.bookmarks)if(t.bookmarks[e].length>0){let a=t.bookmarks[e].map(t=>t.topicList?t.topicList:[]),o=st()(it()(a),(t,e)=>t.value===e.value);t.bookmarks["tpList"+e]=o,n.push(o)}})});let o=it()(n).sort((t,e)=>t.value<e.value?-1:t.value>e.value?1:0),i=st()(o,(t,e)=>t.value===e.value);return{bookArray:a,topics:i}}(t);var i;e=0===(i=n).length?f.a`
      <h2 class="ui center aligned icon header">
        <i class="circular bookmark icon"></i>
        ${"bmlist:header"}
      </h2>
      <p>
        ${"bmlist:intro"}
      </p>
      <ul>
        <li>${"bmlist:item1"}</li>
        <li>${"bmlist:item2"}</li>
      </ul>
      <p>
        ${"bmlist:link"}
      </p>
    `:`\n    ${i.map(t=>`\n      <div data-bid="${t.bookId}" class="item"> \x3c!-- item: ${t.bookId} --\x3e\n        <div class="right floated content">\n          <div data-book="${t.bookId}" class="green ui small button">Open</div>\n        </div>\n        <i class="book icon"></i>\n        <div class="content">\n          <div class="${t.bookId}-header header">\n            ${t.bookTitle}\n          </div>\n          <div id="${t.bookId}-list" class="hide-bookmarks list">\n            ${pt(t.pages)}\n          </div>\n        </div>\n      </div> \x3c!-- item: ${t.bookId} --\x3e\n    `).join("")}\n  `,$(".cmi-bookmark-list").html(e);let r=function(t){return`\n    <label>Filter Topic(s)</label>\n    <select name="topicList" id="bookmark-topic-list" multiple="" class="search ui dropdown">\n      <option value="">${Object(f.b)("label:selecttopic")}</option>\n      ${t.map(t=>""+function(t){return"object"==typeof t?`<option value="${t.value}">${t.topic}</option>`:`<option value="${t}">${t}</option>`}(t)).join("")}\n    </select>\n  `}(o);$("#bookmark-modal-topic-select").html(r),$("#bookmark-topic-list").dropdown(),$("#bookmark-modal-loading").removeClass("active").addClass("disabled");let s=Object(u.a)("bmModal",{modal:{filter:!1}});$("[data-bid]").each((function(){let t={},e=$(this).data("bid");t.count=$(`[data-bid="${e}"] .bookmark-item`).length,t.header=$(`.${e}-header`).text().trim(),$(`.${e}-header`).text(`${t.header} (${t.count})`),s[e]=t})),a&&(Object(u.c)("bmModal",s),$(".cmi-bookmark-list").on("click","[data-book]",(function(t){t.stopPropagation();let e=$(this).attr("data-book"),a=$(`#${e}-list`);a.hasClass("hide-bookmarks")?(a.removeClass("hide-bookmarks"),$(this).text("Close").removeClass("green").addClass("yellow")):(a.removeClass("yellow").addClass("green hide-bookmarks"),$(this).text("Open").removeClass("yellow").addClass("green"))})),$(".bookmark-filter-submit").on("click",(function(t,e){t.preventDefault();let a=$("#bookmark-filter-form").form("get value","topicList"),n=new RegExp(`\\b(${a.join("|")})\\b`);if(0===a.length)return;$(".cmi-bookmark-list .bookmark-item").each((function(){$(this).attr("class").match(n)?$(this).removeClass("hide-bookmark-item"):$(this).addClass("hide-bookmark-item")}));let o=Object(u.a)("bmModal",{modal:{filter:!1}}),i=a.map(t=>({value:t,topic:$(`#bookmark-topic-list > [value='${t}']`).text()}));e||(o.modal.filter=!0,o.modal.topics=a,o.modal.fullTopic=i,Object(u.c)("bmModal",o)),$("[data-bid]").each((function(){let t=$(this).data("bid"),e=$(`[data-bid="${t}"] .bookmark-item.hide-bookmark-item`).length,a=o[t].count-e;$(`.${t}-header`).html(`${o[t].header} (<span class="bookmark-filter-color">${a}</span>/${o[t].count})`)}))})),$(".bookmark-filter-reset").on("click",(function(t){t.preventDefault(),$("#bookmark-filter-form").form("clear"),$(".cmi-bookmark-list .hide-bookmark-item.bookmark-item").each((function(){$(this).removeClass("hide-bookmark-item")}));let e=Object(u.a)("bmModal",{modal:{filter:!1}});$("[data-bid]").each((function(){let t=$(this).data("bid");$(`.${t}-header`).text(`${e[t].header} (${e[t].count})`)})),e.modal.filter=!1,delete e.modal.topics,Object(u.c)("bmModal",e)})),function(){let{modal:t}=Object(u.a)("bmModal",{modal:{filter:!1}}),e=$("#bookmark-filter-form");console.log("modal: ",t),t.filter&&(e.form("set value","topicList",t.topics),$(".bookmark-filter-submit").trigger("click",{init:!0}))}())}).catch(t=>{console.error(t)})}async function ut(t){const e=Object(d.b)();let a=Object(u.a)("bmList",{modal:{filter:!1}});if(a){let t=a.lastFetchDate+288e5;if(Date.now()<t&&a.lastBuildDate>0)return void dt(a)}try{dt(function(t){let e={};return t.forEach(t=>{let[a,n]=t.paraKey.split(".");n=parseInt(n,10)+"",e[a]||(e[a]={}),e[a][n]||(e[a][n]=[]),e[a][n].push(t.annotation)}),e.lastFetchDate=Date.now(),e.lastBuildDate=Date.now(),Object(u.c)("bmList",e),e}(await c(e.userId,t)))}catch(t){console.error(t),w.a.error(Object(f.b)("error:e4"))}}function ht(){$(".bookmark.ui.modal").modal({dimmerSettings:{opacity:.5},autofocus:!1,centered:!0,duration:400,inverted:!0,observeChanges:!0,transition:"horizontal flip",onShow:function(){!function(){const{sourceId:t}=lt.keyInfo.getKeyInfo();ut(t)}()},onVisible:function(){},onHidden:function(){}}),$(".bookmark-modal-open").on("click",t=>{t.preventDefault(),$(".bookmark.ui.modal").modal("show")})}var mt=function(t){lt=t,ht()},ft=a(496);let gt={};function bt(){return f.a`
    <form name="annotation" id="annotation-form" class="ui form">
      <input class="hidden-field" type="text" readonly="" name="status">
      <input class="hidden-field" type="text" readonly="" name="creationDate">
      <input class="hidden-field" type="text" name="aid" readonly>
      <input class="hidden-field" type="text" readonly="" name="rangeStart">
      <div class="fields">
        <div class="three wide field">
          <input id="rangeEnd" type="text" name="rangeEnd" maxlength="4" placeholder="${"label:end"}">
        </div>
        <div id="available-topics" class="twelve wide field"></div>
        </div>
      </div>
      <div class="field">
        <input type="text" name="Comment" placeholder="${"label:comment"}">
      </div>
      <div class="field">
        <input type="text" name="newTopics" placeholder="${"label:newtopic"}">
      </div>
      <div class="field">
        <textarea name="Note" placeholder="${"label:notes"}" rows="3"></textarea>
      </div>
      <div class="fields">
        <button class="annotation-submit ui green button" type="submit">${"action:submit"}</button>
        <button class="annotation-cancel ui red basic button">${"action:cancel"}</button>
        <button class="annotation-share ui green disabled basic button">${"action:share"}</button>
        <button class="annotation-note ui blue basic button">${"label:links"}</button>
        <div class="twelve wide field">
          <button class="annotation-delete ui red disabled right floated button">${"action:delete"}</button>
        </div>
      </div>
    </form>
    <div class="note-and-links hide">
      <table id="bookmark-link-table" class="ui selectable celled table">
        <thead>
          <tr>
            <th></th>
            <th></th>
            <th>${"label:linkref"}</th>
            <th>${"label:link"}</th>
            <th></th>
          </tr>
        </thead>
        <tbody id="bookmark-link-list">
        </tbody>
      </table>
      <form name="linkForm" id="link-form" class="ui form">
        <div class="fields">
          <div class="ten wide field">
            <input required type="text" placeholder="${"label:linknote"}" name="reference">
          </div>
          <div class="five wide field">
            <input required type="text" placeholder="${"label:link"}" name="link">
          </div>
          <button title="add or update" data-index="-1" type="submit" class="green ui icon button">
            <i class="plus circle icon"></i>
          </button>
          <button title="clear fields" type="reset" class="yellow ui icon button">
            <i class="minus circle icon"></i>
          </button>
        </div>
      </form>
    </div>
  `}let kt=[];function $t(t){return kt[t]}function vt(t){$("#link-form [type='submit']").data("index",t)}function yt(t){let e=JSON.parse(t),a=`${e.desc.source}:${e.desc.book}:${e.desc.unit}`;return a=e.desc.question?`${a}:${e.desc.question}:${e.desc.pid}`:`${a}:${e.desc.pid}`,a}function wt(){$(".transcript").on("submit","#link-form",(function(t){t.preventDefault();let e=function(){let t=$("#link-form [type='submit']").data("index");return parseInt(t,10)}(),a=-1===e?"new":"edit",n=$("#link-form").form("get values");if(!function(t,e){let a,n=gt.keyInfo.genParagraphKey(t);try{a=JSON.parse(e)}catch(t){return w.a.error(Object(f.b)("annotate:m3")),!1}return a.aid&&a.desc&&a.key&&a.userId?a.key!==n||(w.a.error(Object(f.b)("annotate:m5")),!1):(w.a.error(Object(f.b)("annotate:m4")),!1)}($(".annotate-wrapper p.cmiTranPara").attr("id"),n.link))return;let o=yt(n.link);if("new"===a){kt.push({reference:n.reference,link:n.link,deleted:!1});let t=function(t,e){return f.a`
    <tr data-index="${e}">
      <td title="${"action:delete"}" class="delete-link-item"><i class="red trash alternate icon"></i></td>
      <td title="${"action:edit"}" class="edit-link-item"><i class="yellow pencil alternate icon"></i></td>
      <td data-name="reference">${t.reference}</td>
      <td data-name="link">${t.link}</td>
      <td title="${"action:follow"}" class="follow-link-item"><i class="green share icon"></i></td>
    </tr>
  `}({reference:n.reference,link:o},kt.length-1);$("#bookmark-link-list").append(t)}else kt[e]={reference:n.reference,link:n.link,deleted:!1},$(`tr[data-index="${e}"] > td[data-name="reference"]`).text(kt[e].reference),$(`tr[data-index="${e}"] > td[data-name="link"]`).text(o),vt(-1);$("#link-form").form("clear")})),$(".transcript").on("click","#bookmark-link-list td.delete-link-item",(function(t){t.stopPropagation(),t.preventDefault();let e=$(this).parent(),a=parseInt(e.attr("data-index"),10);kt[a].deleted=!0,e.remove()})),$(".transcript").on("click","#bookmark-link-list td.edit-link-item",(function(t){t.stopPropagation(),t.preventDefault();let e=parseInt($(this).parent().attr("data-index"),10);$("#link-form").form("set values",kt[e]),vt(e)}))}const xt='\n  <div class="annotate-wrapper ui raised segment"></div>';function jt(t){return t&&0!==t.length?`\n    ${t.map(t=>`\n      <div class="item">\n        <em>${t.topic}</em>\n      </div>\n    `).join("")}\n  `:`\n      <div class="item">\n        <em>${Object(f.b)("annotate:m6")}</em>\n      </div>\n    `}function It(t){let e=[];return t.Note&&e.push("N"),t.links&&e.push("L"+t.links.length),0===e.length?'\n      <div class="item">\n        <i class="bookmark outline icon"></i>\n      </div>\n    ':`\n    ${e.map(t=>`\n      <div class="item">\n        ${function(t){let e;if("N"===t)e="<i class='align justify icon'></i>";else if(t.startsWith("L")){let a=t.substr(1);e=`<i class="linkify icon"></i>[${a}]`}return""+e}(t)}\n      </div>\n    `).join("")}\n  `}function zt(t){return t||Object(f.b)("annotate:m7")}function Ct(t,e,a){let n=$("#annotation-form");$("#link-form");if(kt=[],a){let t=[];if(a.topicList&&(t=a.topicList.map(t=>t.value)),a.links){kt=a.links;let t=`\n    ${kt.map((t,e)=>f.a`
      <tr data-index="${e}">
        <td title="${"action:delete"}" class="delete-link-item"><i class="red trash alternate icon"></i></td>
        <td title="${"action:edit"}" class="edit-link-item"><i class="yellow pencil alternate icon"></i></td>
        <td data-name="reference">${t.reference}</td>
        <td data-name="link">${yt(t.link)}</td>
        <td title="${"action:follow"}" class="follow-link-item"><i class="green share icon"></i></td>
      </tr>
    `).join("")}\n  `;$("#bookmark-link-list").html(t)}n.form("set values",{status:"update",rangeStart:a.rangeStart,rangeEnd:a.rangeEnd,aid:a.aid,creationDate:a.creationDate,Comment:a.Comment,Note:a.Note,topicList:t})}else n.form("set values",{status:"new",rangeStart:t,rangeEnd:t,aid:e});document.getElementById("rangeEnd").focus()}function Ot(){return $("#annotation-form").form("get values")}function Tt(t){let e=$(".transcript .annotation-edit");if(e.length>0){let a=e.first(1).attr("id");return t!==a&&w.a.info(f.a`${"annotate:m8"} ${a}. ${"annotate:m9"}`),!0}return!1}function St(){return!!$(".transcript").hasClass("bookmark-navigator-active")&&(w.a.info(Object(f.b)("annotate:m10")),!0)}function Et(t,e,a){let n=parseInt(a.rangeStart.substr(1),10),o=parseInt(a.rangeEnd.substr(1),10);if(n!==o){let t=B()(n,o+1);for(let e=0;e<t.length;e++)$("#p"+t[e]).addClass("annotation-edit")}else $("#"+t).addClass("annotation-edit");Lt(),$(".annotation-edit").wrapAll(xt),$(".annotate-wrapper").prepend(bt()),$(".annotation-delete.disabled").removeClass("disabled"),$(".annotation-share.disabled").removeClass("disabled"),qt(t,e,a)}function Dt(t,e){let a=gt.keyInfo.genParagraphKey(t),n=gt.keyInfo.describeKey(a),o={userId:Object(d.b)().userId,key:a,aid:e,desc:n};return JSON.stringify(o)}function Pt(){let t=$("div.transcript.ui.disable-selection:not(.user)");t.length>0&&t.removeClass("disable-selection")}function Lt(){let t=$("div.transcript.ui");t.hasClass("disable-selection")||t.addClass("disable-selection")}function Bt(t){gt=t||Qt,$(".transcript").on("submit","#annotation-form",(function(t){t.preventDefault(),Pt();let e=Ot();if(e.topicList.length>0){let t=e.topicList.map(t=>({value:t,topic:$(`#annotation-topic-list > [value='${t}']`).text()}));e.topicList=t}Nt(),$(`[data-annotation-id="${e.aid}"]`).removeClass("show"),$(".transcript .annotation-edit").hasClass("note-style-bookmark")&&(e.bookTitle=$("#book-title").text());let a=kt.filter(t=>!1===t.deleted);a.length>0?e.links=a:kt.filter(t=>!0===t.deleted).length>0&&e.creationDate.length>0&&$(`i[data-link-aid="${e.creationDate}"]`).remove(),de.submit(e),$(".transcript .annotation-edit").removeClass("annotation-edit annotation-note")})),$(".transcript").on("click","#annotation-form .annotation-cancel",(function(t){t.preventDefault(),Pt();let e=Ot();Nt(),$(`[data-annotation-id="${e.aid}"]`).removeClass("show"),de.cancel(e),$(".transcript .annotation-edit").removeClass("annotation-edit")})),$(".transcript").on("click","#annotation-form .annotation-share",(function(t){t.preventDefault();let e=Ot();Nt(),$(`[data-annotation-id="${e.aid}"]`).removeClass("show"),$(".transcript .annotation-edit").removeClass("annotation-edit");let a=Object(d.b)();a||(a={userId:"xxx"});let n,o=e.aid,i=[e.rangeStart,e.rangeEnd],r=i.map(t=>parseInt(t.substr(1),10)),s=i[0];o.length>0?(n=$(`[data-annotation-id="${o}"]`).attr("data-aid"),$(`[data-annotation-id="${o}"]`).addClass("show"),n||(n=Vt.getCreationDate(o),$(`[data-annotation-id="${o}"]`).attr("data-aid",n))):n=$(`#${s} > span.pnum`).attr("data-aid");let l,c=`${location.origin}${location.pathname}?as=${s}:${n}:${a.userId}`,p=B()(r[0],r[1]+1);l="xxx"===a.userId?`\n        <h4 class="ui left floated header">\n          <i title="${Object(f.b)("annotate:m11")}" class="red window close outline icon"></i>\n          <div class="content">\n            ${e.Comment}\n          </div>\n        </h4>\n        <h4 class="ui right floated header">\n          <i title="${Object(f.b)("action:closewin")}" class="share-annotation window close icon"></i>\n        </h4>\n      `:`\n        <h4 class="ui left floated header">\n          <i title="${Object(f.b)("action:fbshare")}" class="share-annotation facebook icon"></i>\n          <i title="${Object(f.b)("action:emailshare")}" class="share-annotation envelope outline icon"></i>\n          <i data-clipboard-text="${c}" title="${Object(f.b)("action:cp2clip")}" class="share-annotation linkify icon"></i>\n          <div class="content">\n            ${e.Comment}\n          </div>\n        </h4>\n        <h4 class="ui right floated header">\n          <i title="${Object(f.b)("action:closewin")}" class="share-annotation window close icon"></i>\n        </h4>\n      `;for(let t=0;t<p.length;t++)0===t?$("#p"+p[t]).addClass("selected-annotation clearBoth"):$("#p"+p[t]).addClass("selected-annotation");$(".selected-annotation").wrapAll("<div class='selected-annotation-wrapper ui clearing raised segment'></div>"),$(".selected-annotation-wrapper").prepend(l),"xxx"!==a.userId&&F.a.register(".share-annotation.linkify")})),nt(),$(".transcript").on("click","#annotation-form .annotation-delete",(function(t){t.preventDefault(),Pt();let e=Ot();Nt();let a=kt;a.length>0&&(e.links=a),de.delete(e),$(".transcript .annotation-edit").removeClass("annotation-edit")})),$(".transcript").on("click","[data-annotation-id]",(function(t){t.preventDefault();let e=$(this).attr("data-annotation-id"),a=$(this).parent("p").attr("id");void 0===a&&(a=$(this).parents("p").attr("id")),Tt(a)||St()||$(".transcript").hasClass("hide-bookmark-highlights")||$(".transcript").hasClass("topic-filter-active")&&!$(this).hasClass("show")||$(this).hasClass("shared")||($(this).popup("hide"),$(this).addClass("show"),Et(a,e,Vt.getItem(a,e).annotation))})),$(".transcript").on("click","p.cmiTranPara > span.pnum",(function(t){t.preventDefault();let e=$(this).parent("p").attr("id");if(Tt()||St())return;let a=Vt.getItem(e);a?Et(e,void 0,a.annotation):(Lt(),$("#"+e).addClass("annotation-edit annotation-note"),$(".annotation-edit").wrapAll(xt),$(".annotate-wrapper").prepend(bt()),qt(e))})),$(".transcript").on("mouseenter","[data-annotation-id]",(function(t){t.preventDefault();let e=$(this).attr("data-annotation-id"),a=$(this).parent("p").attr("id"),n=$(this).data("aid");if(!a)return void console.log("hoverHandler: pid not found");if($(".transcript").hasClass("hide-bookmark-highlights"))return void $(this).popup("hide").popup("destroy");if($(".transcript").hasClass("topic-filter-active")&&!$(this).hasClass("show"))return void $(this).popup("hide").popup("destroy");if($("#"+a).hasClass("annotation-edit"))return void $(`#${a} [data-annotation-id]`).each((function(){$(this).popup("hide").popup("destroy")}));if($("#"+a).hasClass("selected-annotation"))return void $(`#${a} [data-annotation-id]`).each((function(){$(this).popup("hide").popup("destroy")}));if($(this).hasClass("shared"))return void $(this).popup("hide").popup("destroy");let o=Vt.getItem(a,e);if(!o)return;let i=o.annotation,r=jt(i.topicList),s=zt(i.Comment),l=It(i);$(".annotation-information .topic-list").html(r),$(".annotation-information .range").html(`${Object(f.b)("label:range")}: ${i.rangeStart}/${i.rangeEnd}`),$(".annotation-information .description").html(""+s),$(".annotation-information .extra").html(l),$(this).popup({popup:".annotation-information.popup",hoverable:!0}).popup("show");let c=Dt(a,n);$("#popup-button").attr("data-clipboard-text",c),F.a.register("#popup-button"),$("#popup-button").focus()})),$(".transcript").on("click","#annotation-form .annotation-note",(function(t){t.preventDefault(),console.log("note button clicked");let e=$(".note-and-links");e.hasClass("hide")?e.removeClass("hide"):e.addClass("hide")})),wt(),$("body").on("click","#popup-button",(function(t){$("mark.visible").popup("hide"),$(".pnum.has-annotation.visible").popup("hide")})),$(".transcript").on("mouseenter",".has-annotation",(function(t){if(t.preventDefault(),$(".transcript").hasClass("hide-bookmark-highlights"))return void $(this).popup("hide").popup("destroy");let e=$(this).data("aid"),a=$(this).parent("p").attr("id"),n=Vt.getItem(a,e);if(!n)return;let o=n.annotation,i=jt(o.topicList),r=zt(o.Comment),s=It(o);$(".annotation-information .topic-list").html(i),$(".annotation-information .range").html(`${Object(f.b)("label:range")}: ${o.rangeStart}/${o.rangeEnd}`),$(".annotation-information .description").html(""+r),$(".annotation-information .extra").html(s),$(this).popup({popup:".annotation-information.popup",hoverable:!0}).popup("show");let l=Dt(a,e);$("#popup-button").attr("data-clipboard-text",l),F.a.register("#popup-button"),$("#popup-button").focus()}))}function Nt(){$(".annotate-wrapper > form").remove(),$(".annotate-wrapper > .note-and-links").remove(),$(".annotation-edit").unwrap()}function qt(t,e,a){j.fetchTopics().then(n=>{let o=function(t){return`\n    <select name="topicList" id="annotation-topic-list" multiple="" class="search ui dropdown">\n      <option value="">${Object(f.b)("label:selecttopic")}</option>\n      ${t.map(t=>""+function(t){return"object"==typeof t?`<option value="${t.value}">${t.topic}</option>`:`<option value="${t}">${t}</option>`}(t)).join("")}\n    </select>\n  `}(n.topics);$("#available-topics").html(o),$("select.dropdown").dropdown(),Ct(t,e,a)}).catch(t=>{console.error("topic fetch error: ",t),w.a.error(`${Object(f.b)("annotate:m12")}: ${t}`)})}a(175);const Mt=a(109),Kt=a(173),Ut=a(174);let _t={},At=[];function Rt(){let t,e=0;if(0!==At.length)for(let a of At){let n=_t[a];t||(t=document.getElementById(n.pid)),Jt(n,t),Ft(n.id,e),e+=1}}function Ft(t,e){$(`[data-annotation-id="${t}"]`).addClass(["colorClass1","colorClass2","colorClass3","colorClass4","colorClass5","colorClass6"][e%6])}function Ht(t,e=0,a=null){let n=document.getElementById(t.pid);a&&a===t.pid?a&&At.push(t.id):(Jt(t,n),Ft(t.id,e)),_t[t.id]=t}function Jt(t,e=document.body){var a=t.id;if(t.target.source)for(var n=t.target.selector,o=0;o<n.length;o++){var i=n[o];switch(i.type){case"TextPositionSelector":if(0===document.querySelectorAll(`[data-annotation-id="${a}"]`).length){var r,s=document.createElement("mark");s.dataset.annotationId=a,t.aid&&(s.dataset.aid=t.aid),s.classList.add("bookmark-selected-text");try{r=Mt.toRange(e,i),t.wrap=Ut(s,r)}catch(a){i.end--,r=Mt.toRange(e,i),t.wrap=Ut(s,r)}}}}}function Wt(t){$("div.transcript.ui").on("mouseup",(function(t){if(t.preventDefault(),!Object(d.b)())return;if($(this).hasClass("disable-selection"))return;if(document.getSelection().isCollapsed)return;let e=document.getSelection();0!==e.rangeCount&&(e.getRangeAt(0).collapsed||function(t){let e=t.getRangeAt(0);if("DIV"===e.commonAncestorContainer.nodeName)return void w.a.info(Object(f.b)("error:e8"));if("span"===e.startContainer.parentElement.localName)return void w.a.info(Object(f.b)("error:e6"));let a=e.startContainer;for(;"P"!==a.nodeName;)a=a.parentElement;let n=function(t,e=document.body){if(t.collapsed)return null;var a=Mt.fromRange(e,t);Object.assign(a,{type:"TextPositionSelector"});var n=Kt.fromRange(e,t);return Object.assign(n,{type:"TextQuoteSelector"}),{type:"Annotation",title:$("#book-title").text(),url:location.pathname,pid:e.id,id:Object(ft.a)(),target:{type:"SpecificResource",source:location.href,selector:[a,n]}}}(e,a);if(n){let e=a.getElementsByTagName("mark");for(let a of e)if(t.containsNode(a,!0))return void w.a.info(Object(f.b)("error:e7"));Jt(n,a),_t[n.id]=n,Tt((o=n).pid)||St()?de.cancel({aid:o.id}):(Lt(),$("#"+o.pid).addClass("annotation-edit"),$(".annotation-edit").wrapAll(xt),$(".annotate-wrapper").prepend(bt()),qt(o.pid,o.id),$(`[data-annotation-id="${o.id}"]`).addClass("show"))}var o}(e))})),Bt(t)}var Zt=a(25);let Vt,Qt={};let Xt=new Map;function Yt(t,e){$(`#p${t.pid} > span.pnum`).addClass("has-bookmark"),Ht(t.annotation.selectedText,function(t){let e=Xt.get(t);return void 0===e?(Xt.set(t,0),0):(e+=1,Xt.set(t,e),e)}(t.pid),e),ie(t.annotation),se(t.annotation,"highlight")}function Gt(t,e){"selectedText"===(t.annotation.selectedText?"selectedText":"note")?Yt(t):function(t){re(t.pid,t.annotation),se(t.annotation,"note")}(t)}function te(t){!function(t){if(!t)return;let e=_t[t];e&&(e.wrap&&e.wrap.unwrap(),delete _t[t])}(t.annotation.aid)}function ee(t){!function(t){$(`#${t.annotation.rangeStart} > span.pnum`).removeClass("has-annotation");let e=parseInt(t.annotation.rangeEnd.substr(1),10),a=parseInt(t.annotation.rangeStart.substr(1),10),n=a;do{$("#p"+a).removeClass("note-style-bookmark"),a===n&&$("#p"+a).removeClass("note-style-bookmark-start"),a===e&&$("#p"+a).removeClass("note-style-bookmark-end"),a++}while(a<=e)}(t)}function ae(t,e){"selectedText"===(t.annotation.selectedText?"selectedText":"note")?function(t,e){$(`#p${t.pid} > span.pnum`).addClass("has-bookmark"),Ht(t.annotation.selectedText,e),ie(t.annotation),se(t.annotation,"highlight"),$(`[data-annotation-id="${t.annotation.aid}"]`).attr("data-aid",t.creationDate)}(t,e):function(t){re(t.pid,t.annotation),se(t.annotation,"note"),$(`#${t.annotation.rangeStart} > span.pnum`).attr("data-aid",t.creationDate)}(t)}function ne(t,e,a){switch(t){case"loaded":Gt(e);break;case"created":ae(e,a);break;case"updated":!function(t){let e;if(!t.aid)return;if(!t.topicList||0===t.topicList.length){if("new"===t.status)return;let e=$(`[data-annotation-id="${t.aid}"]`).attr("class").split(" ");return void $(`[data-annotation-id="${t.aid}"]`).attr("class",`${e[0]} ${e[1]}`)}e=t.topicList.reduce((t,e)=>`${t} ${e.value}`,""),e=e.trim();let a=e.split(" "),n=$(`[data-annotation-id="${t.aid}"]`).attr("class").split(" ");1===n.length||a.unshift(n[1]),a.unshift(n[0]),e=a.reduce((t,e)=>`${t} ${e}`,""),$(`[data-annotation-id="${t.aid}"]`).attr("class",e)}(e.annotation),function(t){if(t.annotation.selectedText)return;let e=parseInt(t.annotation.rangeStart.substr(1),10),a=parseInt(t.annotation.rangeEnd.substr(1),10),n=e,o=!1;do{$("#p"+e).removeClass("note-style-bookmark"),$("#p"+e).removeClass("note-style-bookmark-start"),$("#p"+e).hasClass("note-style-bookmark-end")&&($("#p"+e).removeClass("note-style-bookmark-end"),o=!0),e++}while(!o);e=n;do{$("#p"+e).addClass("note-style-bookmark"),e===n&&$("#p"+e).addClass("note-style-bookmark-start"),e===a&&$("#p"+e).addClass("note-style-bookmark-end"),e++}while(e<=a)}(e);break;case"deleted":!function(t,e){"selectedText"===(t.annotation.selectedText?"selectedText":"note")?te(t):ee(t),t.annotation.links&&$(`i[data-link-aid="${t.creationDate}"]`).remove(),0===e&&$(`#${t.annotation.rangeStart} > span.pnum`).removeClass("has-bookmark")}(e,a)}}function oe(t){return`\n    ${t.map(t=>`\n      ${function(t){let e=JSON.parse(t.link),a=ue(e),n=`${e.desc.source}:${e.desc.book}:${e.desc.unit}`;return n=e.desc.question?`${n}:${e.desc.question}:${e.desc.pid}`:`${n}:${e.desc.pid}`,`<a class="item" href="${a}">${t.reference}[${n}]</a>`}(t)}\n    `).join("")}\n  `}function ie(t){if(t.topicList&&t.topicList.length>0){let e=t.topicList.reduce((t,e)=>`${t} ${e.value}`,"");$(`[data-annotation-id="${t.aid}"]`).addClass(e)}}function re(t,e){$(`#p${t} > span.pnum`).addClass("has-annotation").attr("data-aid",e.creationDate);let a=parseInt(e.rangeEnd.substr(1),10),n=t;do{$("#p"+n).addClass("note-style-bookmark"),n===t&&$("#p"+n).addClass("note-style-bookmark-start"),n===a&&$("#p"+n).addClass("note-style-bookmark-end"),n++}while(n<=a)}function se(t,e){t.links&&$(`[data-aid="${t.creationDate}"]`).eq(-1).after(`<i data-link-aid="${t.creationDate}" data-type="${e}" class="small bm-link-list linkify icon"></i>`)}function le(t){let e=s()(t);var a;e.rangeStart=e.rangeStart.trim(),e.rangeEnd=e.rangeEnd.trim(),e.rangeEnd.startsWith("p")||(e.rangeEnd="p"+e.rangeEnd),""===e.Comment?delete e.Comment:e.Comment=Object(v.a)(e.Comment),""===e.Note?delete e.Note:e.Note=Object(v.a)(e.Note),""===e.creationDate&&delete e.creationDate,""===e.aid?delete e.aid:(e.selectedText=(a=e.aid,_t[a]),e.rangeEnd=e.rangeStart,e.creationDate&&(e.selectedText.aid=e.creationDate.toString(10)),delete e.textId),0===e.topicList.length&&delete e.topicList,delete e.newTopics,delete e.hasAnnotation,j.postAnnotation(e)}function ce(t,e){j.fetchTopics().then(a=>{let n=z()(t,a.topics,(t,e)=>e.value===t.value);if(n.length>0){let t=a.topics.concat(n);t.sort((t,e)=>{let a,n;return a=t.topic.toLowerCase(),n=e.topic.toLowerCase(),a<n?-1:a>n?1:0}),a.topics=t,Object(u.c)("bmTopics",a);let r=Object(d.b)(),s=""+Qt.sourceId;!function(t,e,a){let n={userId:t,sourceId:e,topicList:a};new Promise((t,e)=>{o.a.post(i.a.user+"/topicList",n).then(e=>{t(e.data.response)}).catch(t=>{e(t)})})}(r.userId,s,t),e.topicList=e.topicList.concat(n),e.newTopics=n,le(e)}}).catch(t=>{throw new Error("bookmark.js:addToTopicList() error: "+t)})}function pe(t,e){if(!Object(d.b)())return;!async function(t){let e=Qt.keyInfo.genPageKey(),a=Object(d.b)();if(a)try{let n=await c(a.userId,e);Vt=new k(n,t),n.length>0&&b()}catch(t){console.error(t)}}(t),Wt(e),$(".toggle-bookmark-highlight").on("click",(function(t){t.preventDefault();let e=$(".transcript");e.hasClass("hide-bookmark-highlights")?(e.removeClass("hide-bookmark-highlights"),$(".toggle-bookmark-highlight").text("Hide Highlighted Text")):(e.addClass("hide-bookmark-highlights"),$(".toggle-bookmark-highlight").text("Show Highlighted Text"))})),$("#bookmark-toggle-disable-selection").on("click",(function(t,e){t.preventDefault();let a=!0;"undefined"!==e&&(a="false"!==e);let n=$(".transcript");n.hasClass("disable-selection")&&n.hasClass("user")?Object(f.b)("menu:m1",!0,"Disable Bookmark Creation").then(t=>{n.removeClass("disable-selection user"),$(".toggle-bookmark-selection").text(t),$("#bookmark-dropdown-menu > span  i.bookmark-corner-icon").addClass("hide"),a&&w.a.success("Bookmark Creation Enabled"),Object(u.c)("bmCreation","enabled")}):Object(f.b)("menu:m2",!0,"Enable Bookmark Creation").then(t=>{n.addClass("disable-selection user"),$(".toggle-bookmark-selection").text(t),$("#bookmark-dropdown-menu > span  i.bookmark-corner-icon").removeClass("hide"),a&&w.a.success("Bookmark Creation Disabled"),Object(u.c)("bmCreation","disabled")})})),function(){let t=Object(u.a)("bmCreation");t&&"enabled"===t||$("#bookmark-toggle-disable-selection").trigger("click","false")}(),function(t){$(".transcript").on("click","td.follow-link-item",(function(e){e.preventDefault();let a=$(this).parent("tr").attr("data-index"),n=t(a),o=JSON.parse(n.link);location.href=ue(o)}))}($t),$(".transcript").on("click",".bm-link-list.linkify",(function(t){t.preventDefault();let e,a=$(this).attr("data-type"),n=$(this).parent("p").attr("id");"note"===a?e=$(this).prev("span").attr("data-aid"):"highlight"===a&&(e=$(this).prev("mark").attr("data-annotation-id"));let o=Vt.getItem(n,e);if(!o)return;let i=oe(o.annotation.links);$(".bm-link-list-popup").html(i),$(this).popup({popup:".bm-link-info.popup",hoverable:!0,on:"click"}).popup("show")}));let a=Object(T.d)();a&&function(t,e){J=e,G(t)}(a,Qt)}const de={submit(t){let e=function({newTopics:t}){let e=t.replace(/[^a-zA-Z0-9ąćęłńóśźżĄĆĘŁŃÓŚŹŻ, ]/g,"");if(!e||""===e)return[];e=e.replace(/^,*/,""),e=e.replace(/,*$/,"");let a=e.split(",");return a=a.map(t=>t.trim()),a=a.map(t=>O()(t)),a=a.map(t=>/ /.test(t)?{value:t.replace(/ /g,""),topic:t}:{value:t,topic:t}),a}(t);e.length>0?ce(e,t):le(t)},cancel(t){!t.creationDate&&t.aid&&function(t){if(!t)return;let e=_t[t];e.aid||(e.wrap&&e.wrap.unwrap(),delete _t[t])}(t.aid)},async delete(t){try{await j.deleteAnnotation(t.rangeStart,t.creationDate)}catch(t){throw new Error(t)}}};function ue(t){let e=Object(Zt.b)(t.key);return location.pathname===e?"#"+t.desc.pid:`${e}?v=${t.desc.pid}`}var he=function(t,e){Qt=e,function(t){x=t}(Qt),$(".transcript").length&&pe(t,e),mt(e)};let me,fe={};function ge(){$(".share-annotation-close").on("click",(function(t){t.preventDefault(),me.selectedText&&me.selectedText.wrap.unwrap(),$("#shared-annotation-wrapper > .header").remove(),$(".shared-selected-annotation").unwrap(),$(".selected-annotation").removeClass("shared-selected-annotation"),$(".bookmark-selected-text.shared").removeClass("shared"),Rt()}))}function be(){return new Promise(async(t,e)=>{let a=Object(T.c)();if(!a)return void t(!1);let[n,r,s]=decodeURIComponent(a).split(":");if(!n)return void t(!1);if(0===$("#"+n).length)return void t(!1);let c=fe.keyInfo.genParagraphKey(n);Object(T.b)();try{const e=await function(t,e,a){return new Promise((n,r)=>{o.a.get(`${i.a.user}/annotation/${t}/${l(e)}/${a}`).then(t=>{console.log("getAnnotation: %o",t);let e=t.data.response;e.userId?(e.annotation.userId=e.userId,e.annotation.creationDate=e.creationDate,e.annotation.selectedText&&(e.annotation.selectedText=JSON.parse(e.annotation.selectedText)),n(e.annotation)):n({})}).catch(t=>{r(t)})})}(s,c,r);if(!e.userId)return Rt(),Object(T.a)(),w.a.warning("Requested Bookmark was not found"),void t(!1);let a=document.getElementById(e.rangeStart);e.selectedText&&Jt(e.selectedText,a),$(`[data-aid="${r}"]`).addClass("shared"),function(t){let e=[t.rangeStart,t.rangeEnd].map(t=>parseInt(t.substr(1),10)),a=B()(e[0],e[1]+1),n=`\n    <h4 class="ui header">\n      <i title="${Object(f.b)("action:close")}" class="share-annotation-close small window close icon"></i>\n      <div class="content">\n        ${t.Comment?t.Comment:""}\n      </div>\n    </h4>\n  `;for(let t=0;t<a.length;t++)$("#p"+a[t]).addClass("shared-selected-annotation");$(".shared-selected-annotation").wrapAll("<div id='shared-annotation-wrapper' class='ui raised segment'></div>"),$("#shared-annotation-wrapper").prepend(n),q()(document.getElementById("shared-annotation-wrapper"),{align:{top:.2}})}(e),me=e,ge(),Object(T.a)()}catch(e){return Object(T.a)(),console.error(e),void t(!1)}t(n)})}var ke=function(t){return fe=t,be()},$e=a(7),ve=a(10);function ye(t){if("transcript"===t){ke($e.a).then(t=>{he(t,$e.a)});let t=$e.a.keyInfo.genPageKey();Object(ve.d)(t).then(t=>{let e=`${t.source}<br/>${t.bookTitle}`;t.subTitle&&(e=`${e}<br/>${t.subTitle}`),e=`${e}<br/>${t.title}`,$("#transcript-page-info").html(e)})}else he(void 0,$e.a);_($e.a)}},57:function(t,e,a){"use strict";var n=a(6),o=a.n(n),i=a(9);var r=a(10),s=a(81),l=a.n(s),c=a(3),p=a(7),d=a(2);const u=a(16);function h(t,e,a,n){return`\n    <h3>${e[t]} (${n.length})</h3>\n    <div class="ui list">\n      ${n.map(t=>`\n        <div class="item">\n          <i class="book icon"></i>\n          <div class="content">\n            <div class="header">\n              ${function(t,e){return t[e.pageKey].title}(a,t)} (${t.m.length})\n            </div>\n            <div class="list">\n              ${t.m.map(e=>`\n                <div class="item">\n                  <i class="search icon"></i>\n                  <div class="content">\n                    <div class="header">\n                      <a href="${a[t.pageKey].url}?srch=${e.location}">${Object(d.a)("search:s10")} ${e.location.substr(1)}</a>\n                    </div>\n                    <div class="description">\n                      ${e.context}\n                    </div>\n                  </div>\n                  </div> \x3c!-- item --\x3e\n              `).join("")}\n            </div> \x3c!-- list --\x3e\n          </div>\n        </div>\n      `).join("")}\n    </div> \x3c!-- ui list --\x3e\n  `}function m(t){let e=u.getKeyInfo().keyLength,a=[],n=0;for(const o of t)a[n]?a[n].unit!==o.unit?(n++,a[n]={unit:o.unit,book:o.book,pageKey:o.key.substr(0,e),m:[{location:o.location,context:o.context}]}):a[n].m.push({location:o.location,context:o.context}):a[n]={unit:o.unit,book:o.book,pageKey:o.key.substr(0,e),m:[{location:o.location,context:o.context}]};return a}function f(t){let e=u.getKeyInfo().keyLength,a=t.map(t=>t.key.substr(0,e));return l()(a)}function g(t,e){const a=u.getBooks();let n=[];for(let e=0;e<a.length;e++){let o=a[e];if(t[o]){let e=f(t[o]);for(const t of e)n.push(Object(r.d)(t))}}Promise.all(n).then(n=>{let o="",i={},r={};for(const t of n){let{bookTitle:e,title:a,subTitle:n,url:o}=t;n&&(a=`${a}: ${n}`),i[t.pageKey]={title:a,url:o},r[t.bookId]||(r[t.bookId]=e)}let s={};for(let e of a)t[e]&&(s[e]=m(t[e]),o+=h(e,r,i,s[e]));$(".cmi-search-list").html(o),$("#search-results-header").html(`: <em>${e}</em>`),function(t,e,a,n,o,i){const r=u.getBooks();let s=u.getKeyInfo().keyLength;if(0===e)return;let l=[];for(const t of r)if(i[t])for(const e of i[t]){let t={key:e.key.substr(0,s),url:`/${e.book}/${e.unit}/`,location:e.location};l.push(t)}Object(c.c)("srchResults",{query:t,count:e,titleArray:a,pageInfo:n,data:o,flat:l})}(e,t.count,r,i,s,t)}).catch(t=>{console.error("Error: %s",t.message)})}var b=a(11),k=a(18),v=a.n(k),y=a(8),w=a.n(y);const x=a(16),j="standalone"===p.a.env?"":p.a.url_prefix;function I(t,e){v()(document.getElementById(t),{align:{top:.2}},a=>{!function(t,e){console.log(`${t}: ${e}`)}(`scroll from search navigator ${e}(${t})`,a)})}class z{constructor(t,e,a,n){this.query=t,this.start=e,this.end=a,this.count=a-e+1,this.hits=n}setStart(t,e){this.current=t;let a=this.hits[t].location;e?setTimeout(I,250,a,"setStart(first)"):I(a,"setStart()"),this.setTitle()}setTitle(){let t=this.current-this.start+1,e=`${Object(d.a)("label:l4")} <em>${this.query}</em> (${t} ${Object(d.a)("label:l5")} ${this.count})`;$(".search-navigator-header-query").html(e)}setPrevious(){if(this.start===this.end)return;let t=this.current-1;t<this.start&&(t=this.end),this.setStart(t)}setNext(){if(this.start===this.end)return;let t=this.current+1;t>this.end&&(t=this.start),this.setStart(t)}showCurrent(){let t=this.hits[this.current].location;v()(document.getElementById(t),{align:{top:.2}})}}function C(t){let e=Object(c.a)("srchResults");if(!e)return void w.a.warning(Object(d.a)("notify:n9"));let a=x.genPageKey(),n=a.toString(10),o=x.decodeKey(a).bookId,i=e.titleArray[o];if(!e.pageInfo[a])return void w.a.warning(`${Object(d.a)("notify:n10")} ${t}`);let r,s=function(t,e,a){let n={current:-1,prev:-1,start:-1,end:-1,next:-1},o=!1;for(let i=0;i<a.length;i++)if(a[i].key===e)a[i].location===t&&(n.current=i),o?n.end=i:(n.start=i,n.end=i,o=!0,i>0&&(n.prev=i-1));else if(o){n.next=i;break}return n}(t,n,e.flat);if(-1===s.current)return void w.a.warning(`${Object(d.a)("notify:n10")} ${t}`);s.prev>-1?(r=`${j}${e.flat[s.prev].url}?srch=${e.flat[s.prev].location}`,$(".search-navigator .previous-page").attr("href",r)):$(".search-navigator .previous-page").addClass("inactive"),s.next>-1?(r=`${j}${e.flat[s.next].url}?srch=${e.flat[s.next].location}`,$(".search-navigator .next-page").attr("href",r)):$(".search-navigator .next-page").addClass("inactive"),s.start===s.end&&($(".search-navigator .previous-match").addClass("inactive"),$(".search-navigator .next-match").addClass("inactive")),$(".search-navigator-header-book").text(`${i} - ${e.pageInfo[a].title}`);let l=new z(e.query,s.start,s.end,e.flat);l.setStart(s.current,!0);let p=function(t,e,a,n,o){let i=0,r=new RegExp("(?:^|(?=[a-pr-uwy-zA-PR-UWY-ZąćęłńóśźżĄĆĘŁŃÓŚŹŻ]))("+n+")(?:$|\\b|)","gim");for(let s=e;s<=a;s++){let e=t[s].location,a=document.getElementById(e);if(!a){i++;continue}let l=a.innerHTML;if(l=l.replace(/[\r\n]/gm," "),a.innerHTML="show"===o?l.replace(r,"<mark class='show-mark'>$1</mark>"):l.replace(r,"<mark class='hide-mark'>$1</mark>"),a.innerHTML===l){let t=a.textContent;t=t.replace(/[\r\n]/gm," ");let n=l.indexOf("</span>");if(n>-1){let i=l.substring(0,n+7);t=t.replace(`(${e})`,i),"show"===o?(a.innerHTML=t.replace(r,"<mark class='show-mark'>$1</mark>"),console.log(l),console.log(t)):a.innerHTML=t.replace(r,"<mark class='hide-mark'>$1</mark>")}}a.innerHTML===l&&(console.log('Regex did not match: "%s" for %s',n,e),i++)}return i}(e.flat,s.start,s.end,e.query,"show");p&&w.a.info(`${Object(d.a)("notify:n11")} ${p} ${Object(d.a)("notify:n12")}`),function(t){$(".search-navigator .previous-match").on("click",(function(e){e.preventDefault(),t.setPrevious()})),$(".search-navigator .next-match").on("click",(function(e){e.preventDefault(),t.setNext()})),$(".search-navigator .current-match").on("click",(function(e){e.preventDefault(),t.showCurrent()})),$(".search-navigator .close-window").on("click",(function(t){t.preventDefault(),$(".search-navigator-wrapper").addClass("hide-search-navigator"),$(".transcript").removeClass("search-navigator-active")}))}(l),$(".transcript").addClass("search-navigator-active"),$(".search-navigator-wrapper").removeClass("hide-search-navigator")}const O=Symbol("searching"),T=Symbol("search_result"),S=Symbol("search_error"),E=Symbol("saved_search");function D(t,e,a,n){switch(t){case O:$("#search .ui.icon.input").addClass("loading"),$("#search input").attr("disabled",!0),$(".ui.search.message").addClass("purple"),$(".search-message.header").text(Object(d.a)("search:s1")),$(".search-message-body").html(`<p>${Object(d.a)("search:s2")} <em>${a}</em></p>`);break;case E:$(".search-message.header").text(Object(d.a)("label:l6")),$(".search-message-body").html(`<p>${Object(d.a)("search:s3")} <em>${a}</em> ${Object(d.a)("search:s4")} <em>${e}</em> ${Object(d.a)("search:s5")} ${n} ${Object(d.a)("search:s6")}</p>`);break;case T:$("#search .ui.icon.input").removeClass("loading"),$("#search input").attr("disabled",!1),$(".ui.search.message").removeClass("purple").removeClass("negative"),n>0&&$("#search input").val(""),$(".search-message.header").text(Object(d.a)("search:s7")),$(".search-message-body").html(`<p>${Object(d.a)("search:s3")} <em>${a}</em> ${Object(d.a)("search:s5")} ${n} ${Object(d.a)("search:s7")}</p>`);break;case S:$("#search .ui.icon.input").removeClass("loading"),$("#search input").attr("disabled",!1),$(".ui.search.message").removeClass("purple").addClass("negative"),$(".search-message.header").text(Object(d.a)("search:s8")),$(".search-message-body").html(`<p>${e}</p>`)}}async function P(t){let e={source:"pwom",query:t,width:30};try{let t=await(a=e,new Promise((t,e)=>{o.a.post(i.a.search,a).then(e=>{t(e.data)}).catch(t=>{console.error("search error: %o",t),e(t)})}));D(T,"",`"${t.queryTransformed}"`,t.count),t.count>0?g(t,t.queryTransformed):w.a.info(`${Object(d.a)("search:s3")} "${t.queryTransformed}" ${Object(d.a)("search:s9")}`),document.getElementById("search-input-field").focus()}catch(t){console.error("search error: %o",t),D(S,t.message)}var a}function L(){let t=Object(b.f)();t&&C(t)}function B(){$(".search.ui.modal").modal({dimmerSettings:{opacity:.5},observeChanges:!0,onShow:function(){0===$(".cmi-search-list > h3").length&&function(){const t=Object(c.a)("srchResults");if(!t)return;const e=u.getBooks();let a="";for(let n of e)t.data[n]&&(a+=h(n,t.titleArray,t.pageInfo,t.data[n]));$(".cmi-search-list").html(a),$(".search-message.header").text(Object(d.a)("search:s11")),$(".search-message-body").html(`<p>${Object(d.a)("search:s3")} <em>${t.query}</em> ${Object(d.a)("search:s5")} ${t.count} ${Object(d.a)("search:s6")}</p>`),$("#search-results-header").html(`: <em>${t.query}</em>`)}()}}),$(".search-modal-open").on("click",t=>{t.preventDefault(),$(".search.ui.modal").modal("show")}),$("#search").submit((function(t){t.preventDefault();var e=$("#search .source").text(),a=$("#search input").val();0!==a.length&&(D(O,e,a),P(a))}))}e.a={initialize:function(){$(".transcript").length&&L(),B()}}},58:function(t,e,a){"use strict";var n=a(83),o=a.n(n),i=a(84),r=a.n(i);function s(t,e){let a=t.filter(t=>{if("!"===t.element[0])return t.element=t.element.substring(1),!0;let e=t.element.substring(1),a=document.getElementById(e);return!!a&&null!==a.offsetParent});if(0===a.length)return;e||(e={allowClose:!1,opacity:.5});const n=new r.a(e);n.defineSteps(a),n.start()}var l=a(16),c=a.n(l),p=a(12),d=a(2);function u(){$("#help-menu").on("click","div.item",(function(t){t.preventDefault(),$(this).hasClass("page-tour")&&function(){const t=new o.a({allowClose:!1,opacity:.5,doneBtnText:"Skończone",closeBtnText:"Zamknąć",nextBtnText:"Kolejny",prevBtnText:"Poprzedni"});t.defineSteps([{element:"#source-homepage",popover:{title:"Droga Mistrzostwa",description:"Oto główna strona wszystkich nauk <em>Drogi Mistrzostwa</em> umieszczonych w niniejszej Bibliotece. Trzy książki posiadają ścieżkę dźwiekową i można je czytać jednocześnie słuchając.<br><br>Kliknij na obrazek książki, aby zobaczyć spis treści&hellip;",position:"bottom"}},{element:"#book-woh",popover:{title:"Droga Serca",description:"Pierwsza z trzech książek, które tworzą trzyletni proces duchowej ścieżki przebudzenia.",position:"top"}},{element:"#book-wot",popover:{title:"Droga Przemiany",description:"Drugi rok comiesięcznych lekcji prowadzących do przemiany serca i umysłu.",position:"top"}},{element:"#book-wok",popover:{title:"Droga Poznania",description:"Ostatni tom, który zamyka trylogię <em>Drogi Mistrzostwa</em>.",position:"top"}},{element:"#book-lj",popover:{title:"Listy Jeszuy",description:"Opowieść Jayema o pojawieniu się Jeszuy w jego życiu i danych mu naukach nazwanych Listami Jeszuy.",position:"top"}},{element:"#book-wos",popover:{title:"Droga Sługi",description:"Poetycki opis podróży przebudzenia, od narodzenia do rozpoznania siebie jako sługi, który kroczy przebudzony w służbie dla wszystkich swych sióstr i braci.",position:"top"}},{element:"#book-early",popover:{title:"Wczesne lata",description:"Zbiór przesłań danych przed powstaniem <em>Drogi Serca</em>, pierwszej części trylogii <em>Drogi Mistrzostwa</em>.",position:"top"}}]),t.start()}(),$(this).hasClass("page-navtour")&&s([{element:"#masthead-title",popover:{title:"Nawigacja i funkcjonalności",description:"Droga Mistrzostwa jest częśćią Biblioteki Nauk Umysłu Chrystusa. Na każdej stronie możesz kliknąć w tym miejscu, aby wyświetlić główną stronę Biblioteki z wszystkimi dostępnymi naukami.",position:"bottom"}},{element:"#page-menu",popover:{title:"Menu",description:"To jest menu strony. Jest ono zawsze widoczne i dostępne, gdy przewijasz stronę w dół czytając lub przeszukując tekst. Menu na innych stronach jest podobne, lecz może mieć dodatkowe funkcjonalności.",position:"bottom"}},{element:"#bookmark-dropdown-menu",popover:{title:"Lista zakładek",description:"Wyświetl listę zakładek, jakie utworzyłeś i opcjonalnie możesz je filtrować tematami. Możesz szybko przejść do dowolnej zakładki. Możesz dowiedzieć się więcej o zakładkach z instrukcji wideo.",position:"bottom"}},{element:"#search-modal-open",popover:{title:"Szukaj we wszystkich książkach",description:"Możesz wyszukiwać interesujące cię tematy we wszystkich książkach Drogi Mistrzostwa.",position:"bottom"}},{element:"#quick-links-dropdown-menu",popover:{title:"Przejdź do innych nauk Biblioteki",description:"Szybko przejdź do innych nauk zebranych w Bibliotece.",position:"bottom"}},{element:"#help-menu",popover:{title:"Pomoc oraz informacje",description:"Dowiedz się więcej na temat nauk oraz funkcjonalności strony.",position:"bottom"}},{element:"#login-guest-menu-option",popover:{title:"Zaloguj się/Załóż konto",description:"Załóż konto i zaloguj się do strony. Konto jest darmowe i pozwala tworzyć własne zakładki ( zaznaczone fragmenty tekstu). Możesz dzielić się tak utworzonymi zakładkami na Facebooku.",position:"left"}},{element:"#login-account-menu-option",popover:{title:"Zaloguj się/Załóż konto",description:"Załóż konto i zaloguj się do strony. Konto jest darmowe i pozwala tworzyć własne zakładki ( zaznaczone fragmenty tekstu). Możesz dzielić się tak utworzonymi zakładkami na Facebooku.",position:"left"}}],{allowClose:!1,opacity:.5,doneBtnText:"Skończone",closeBtnText:"Zamknąć",nextBtnText:"Kolejny",prevBtnText:"Poprzedni"}),$(this).hasClass("transcript-tour")&&function(){let t=[];t.push({element:"#masthead-title",popover:{title:"Bibliotek Nauk Umysłu Chrystusa",description:"Ta strona jest częścią Biblioteki Nauk Umysłu Chrystusa. Kliknij ten link, aby przejść do strony głównej Biblioteki.",position:"bottom"}}),t.push({element:"#src-title",popover:{title:"Droga Mistrzostwa",description:"Ta strona pochodzi z Drogi Mistrzostwa. Kliknij ten link, aby przejść do strony głównej Drogi Mistrzostwa.",position:"bottom"}}),t.push({element:"#book-title",popover:{title:"Tytuł książki",description:"To identyfikuje książkę i rozdział treści z tej strony.",position:"bottom"}}),t.push({element:"#bookmark-dropdown-menu",popover:{title:"Zakładki",description:"Możesz utworzyć zakładkę z zakreślonego tekstu i powiązać ją z jedną lub z większą liczbą kategorii.",position:"right"}}),t.push({element:"#search-modal-open",popover:{title:"Szukaj we wszystkich książkach",description:"Znajdź interesujące cię tematy, przeszukując wszystkie książki Drogi Mistrzostwa.",position:"bottom"}}),t.push({element:"#audio-player-menu-option",popover:{title:"Posłuchaj nagrania audio",description:"Kliknij ikonę głośnika, aby wyświetlić odtwarzacz audio. Możesz czytać tekst jednocześnie go słuchając.",position:"bottom"}}),t.push({element:"#pnum-toggle-menu-option",popover:{title:"Pokaż/Ukryj znaczniki akapitów.",description:"Pokaż lub ukryj znaczniki, które poprzedzają każdy akapit.",position:"bottom"}}),t.push({element:"#jump-to-top-menu-option",popover:{title:"Idź na górę strony",description:"Przejdź szybko na górę strony.",position:"bottom"}}),t.push({element:"#contents-modal-open",popover:{title:"Spis treści",description:"Zobacz spis treści.",position:"bottom"}}),t.push({element:"#toc-previous-page",popover:{title:"Poprzednia strona",description:"Idź do poprzedniej strony. Zostanie to wyłączone, kiedy pierwsza strona zostanie wyświetlona.",position:"bottom"}}),t.push({element:"#toc-next-page",popover:{title:"Następna strona",description:"Idź do następnej strony. Zostanie to wyłączone, kiedy ostatnia strona zostanie wyświetlona.",position:"bottom"}}),t.push({element:"#quick-links-dropdown-menu",popover:{title:"Przejdź do kolejnych nauk",description:"Szybko przejdź do kolejnych nauk Biblioteki.",position:"bottom"}}),t.push({element:"#about-dropdown-menu",popover:{title:"Pomoc",description:"Dowiedz się, jak używać funkcjonalności Biblioteki.",position:"bottom"}}),$("#login-guest-menu-option").hasClass("hide")||t.push({element:"#login-guest-menu-option",popover:{title:"Zaloguj się/Wyloguj się",description:"Utwórz konto i zaloguj lub wyloguj się. Kiedy się zalogujesz, zakładki, które utworzysz, będą dostępne na wszystkich urządzeniach, jakich używasz do łączenia się z Biblioteką w internecie.",position:"bottom"}}),$("#login-account-menu-option").hasClass("hide")||t.push({element:"#login-account-menu-option",popover:{title:"Zaloguj się/Wyloguj się",description:"Utwórz konto i zaloguj lub wyloguj się. Kiedy się zalogujesz, zakładki, które utworzysz, będą dostępne na wszystkich urządzeniach, jakich używasz do łączenia się z Biblioteką w internecie.",position:"bottom"}}),s(t,{allowClose:!1,opacity:.5,doneBtnText:"Skończone",closeBtnText:"Zamknąć",nextBtnText:"Kolejny",prevBtnText:"Poprzedni"})}(),$(this).hasClass("about-src")&&(location.href="/about/"),$(this).hasClass("read-documentation")&&(location.href="/acq/quick/"),$(this).hasClass("view-documentation")&&(location.href="/acq/video/"),$(this).hasClass("polish-documentation")&&(location.href="/t/pwom/acq/video/"),$(this).hasClass("contact-me")&&(location.href="/t/pwom/acq/contact/")})),$(".login-menu-option-account").on("click","div.item",(function(t){$(this).hasClass("profile-management")&&(location.href="/profile/email/"),$(this).hasClass("topic-management")&&(location.href="/profile/topicMgt/")})),$("#quick-links").on("click","div.item",(function(t){t.preventDefault();let e=$(this).attr("data-href");location.href=e}))}e.a={initialize(){if(u(),$(".copy-page-key").length>0){let t=c.a.genPageKey();$(".copy-page-key").attr("data-clipboard-text",t).text(`${Object(d.a)("label:key")}: ${t}`),p.a.register(".copy-page-key")}}}},7:function(t,e,a){"use strict";var n=a(10);const o=a(16);let i="pwom";e.a={env:"integration",lang:"pl",sid:i,title:"Droga Mistrzostwa",url_prefix:"/t/pwom",getPageInfo:n.d,keyInfo:o,sourceId:16,quoteManagerId:"3f7f14c0d7a13eb2e5a05f3c981f33fb",quoteManagerName:"CMI",audioBase:"https://s3.amazonaws.com/assets.christmind.info/pwom/audio",searchEndpoint:"https://d9lsdwxpfg.execute-api.us-east-1.amazonaws.com/latest/pwom",store:{bmList:"bm.list",bmCreation:"bm.creation",bmTopics:"bm.topics",bmModal:"bm.modal",srchResults:"srch.results",pnDisplay:"pn.display",cfgacq:"cfg.acq",cfgwoh:"cfg.woh",cfgwot:"cfg.wot",cfgwok:"cfg.wok",cfgwos:"cfg.wos",cfglj:"cfg.lj",cfgearly:"cfg.early"}}},86:function(t,e){t.exports={sourceId:16,sid:"pwom",prefix:"/t/pwom",books:["lj","wos","woh","wot","wok","early","acq"],bookIds:["xxx","lj","wos","woh","wot","wok","early","acq"],contents:{lj:["xxx","acknow","reader","forwd","intr","chap01","chap02","chap03","chap04","chap05","chap06","chap07","chap08","chap09","chap10","chap11","chap12","eplg"],wos:["xxx","intr","chap01","chap02","chap03","chap04","aftwrd","eplg","prayer"],woh:["xxx","preface","l01","l02","l03","l04","l05","l06","l07","l08","l09","l10","l11","l12"],woh2:["xxx","/l01qa","/l02qa","/l06qa","/l07qa","/l08qa","/l09qa","/l10qa","/l11qa","/l12qa"],wot:["xxx","preface","l01","l02","l03","l04","l05","l06","l07","l08","l09","l10","l11","l12"],wot2:["xxx","/l01qa","/l06qa","/l07qa","/l09qa","/l11qa"],wok:["xxx","preface","l01","l02","l03","l04","l05","l06","l07","l08","l09","l10","l11"],wok2:["xxx","/l02qa","/l03qa","/l04qa","/l06qa","/l10qa"],early:["xxx","intr","chap01","chap02","chap03","chap04","chap05","chap06","chap07","chap08","chap09","chap10"],early2:["xxx","/chap01qa","/chap02qa","/chap03qa","/chap08qa","/chap09qa"],acq:["xxx","path","advice","video","contact"]}}},87:function(t,e,a){const n=a(130).sprintf,o=["preface","text","workbook","manual","acq"],i=["xxx",...o],r={acq:["xxx","welcome","acim","web","raj"],preface:["xxx","preface"],text:["xxx","chap0100","chap0101","chap0102","chap0200","chap0201","chap0202","chap0203","chap0204","chap0205","chap0300","chap0301","chap0302","chap0303","chap0304","chap0305","chap0306","chap0307","chap0308","chap0400","chap0401","chap0402","chap0403","chap0404","chap0405","chap0406","chap0407","chap0408","chap0500","chap0501","chap0502","chap0503","chap0504","chap0505","chap0506","chap0507","chap0508","chap0600","chap0601","chap0602","chap0603","chap0604","chap0700","chap0701","chap0702","chap0703","chap0704","chap0705","chap0706","chap0707","chap0708","chap0709","chap0710","chap0711","chap0800","chap0801","chap0802","chap0803","chap0804","chap0805","chap0806","chap0807","chap0808","chap0809","chap0810","chap0900","chap0901","chap0902","chap0903","chap0904","chap0905","chap0906","chap0907","chap0908","chap0909","chap0910","chap1000","chap1001","chap1002","chap1003","chap1004","chap1005","chap1006","chap1007","chap1100","chap1101","chap1102","chap1103","chap1104","chap1105","chap1106","chap1107","chap1108","chap1109","chap1200","chap1201","chap1202","chap1203","chap1204","chap1205","chap1206","chap1300","chap1301","chap1302","chap1303","chap1304","chap1305","chap1306","chap1307","chap1308","chap1400","chap1401","chap1402","chap1403","chap1404","chap1405","chap1406","chap1500","chap1501","chap1502","chap1503","chap1504","chap1505","chap1506","chap1507","chap1508","chap1509","chap1510","chap1600","chap1601","chap1602","chap1603","chap1604","chap1605","chap1606","chap1607","chap1700","chap1701","chap1702","chap1703","chap1704","chap1705","chap1706","chap1707","chap1708","chap1800","chap1801","chap1802","chap1803","chap1804","chap1805","chap1806","chap1807","chap1808","chap1809","chap1810","chap1900","chap1901","chap1902","chap1903","chap1904","chap1905","chap1906","chap1907","chap1908","chap1909","chap1910","chap1911","chap2000","chap2001","chap2002","chap2003","chap2004","chap2005","chap2006","chap2007","chap2008","chap2100","chap2101","chap2102","chap2103","chap2104","chap2105","chap2106","chap2107","chap2108","chap2200","chap2201","chap2202","chap2203","chap2204","chap2205","chap2206","chap2300","chap2301","chap2302","chap2303","chap2304","chap2400","chap2401","chap2402","chap2403","chap2404","chap2405","chap2406","chap2407","chap2500","chap2501","chap2502","chap2503","chap2504","chap2505","chap2506","chap2507","chap2508","chap2509","chap2600","chap2601","chap2602","chap2603","chap2604","chap2605","chap2606","chap2607","chap2608","chap2609","chap2610","chap2700","chap2701","chap2702","chap2703","chap2704","chap2705","chap2706","chap2707","chap2708","chap2800","chap2801","chap2802","chap2803","chap2804","chap2805","chap2806","chap2807","chap2900","chap2901","chap2902","chap2903","chap2904","chap2905","chap2906","chap2907","chap2908","chap2909","chap3000","chap3001","chap3002","chap3003","chap3004","chap3005","chap3006","chap3007","chap3008","chap3100","chap3101","chap3102","chap3103","chap3104","chap3105","chap3106","chap3107"],workbook:["xxx","introp1","l001","l002","l003","l004","l005","l006","l007","l008","l009","l010","l011","l012","l013","l014","l015","l016","l017","l018","l019","l020","l021","l022","l023","l024","l025","l026","l027","l028","l029","l030","l031","l032","l033","l034","l035","l036","l037","l038","l039","l040","l041","l042","l043","l044","l045","l046","l047","l048","l049","l050","review1","l051","l052","l053","l054","l055","l056","l057","l058","l059","l060","l061","l062","l063","l064","l065","l066","l067","l068","l069","l070","l071","l072","l073","l074","l075","l076","l077","l078","l079","l080","review2","l081","l082","l083","l084","l085","l086","l087","l088","l089","l090","l091","l092","l093","l094","l095","l096","l097","l098","l099","l100","l101","l102","l103","l104","l105","l106","l107","l108","l109","l110","review3","l111","l112","l113","l114","l115","l116","l117","l118","l119","l120","l121","l122","l123","l124","l125","l126","l127","l128","l129","l130","l131","l132","l133","l134","l135","l136","l137","l138","l139","l140","review4","l141","l142","l143","l144","l145","l146","l147","l148","l149","l150","l151","l152","l153","l154","l155","l156","l157","l158","l159","l160","l161","l162","l163","l164","l165","l166","l167","l168","l169","l170","review5","l171","l172","l173","l174","l175","l176","l177","l178","l179","l180","intro181","l181","l182","l183","l184","l185","l186","l187","l188","l189","l190","l191","l192","l193","l194","l195","l196","l197","l198","l199","l200","review6","l201","l202","l203","l204","l205","l206","l207","l208","l209","l210","l211","l212","l213","l214","l215","l216","l217","l218","l219","l220","introp2","forgiveness","l221","l222","l223","l224","l225","l226","l227","l228","l229","l230","salvation","l231","l232","l233","l234","l235","l236","l237","l238","l239","l240","world","l241","l242","l243","l244","l245","l246","l247","l248","l249","l250","sin","l251","l252","l253","l254","l255","l256","l257","l258","l259","l260","body","l261","l262","l263","l264","l265","l266","l267","l268","l269","l270","christ","l271","l272","l273","l274","l275","l276","l277","l278","l279","l280","holyspirit","l281","l282","l283","l284","l285","l286","l287","l288","l289","l290","realworld","l291","l292","l293","l294","l295","l296","l297","l298","l299","l300","secondcoming","l301","l302","l303","l304","l305","l306","l307","l308","l309","l310","lastjudgement","l311","l312","l313","l314","l315","l316","l317","l318","l319","l320","creation","l321","l322","l323","l324","l325","l326","l327","l328","l329","l330","ego","l331","l332","l333","l334","l335","l336","l337","l338","l339","l340","miracle","l341","l342","l343","l344","l345","l346","l347","l348","l349","l350","whatami","l351","l352","l353","l354","l355","l356","l357","l358","l359","l360","final","l361","epilog"],manual:["xxx","chap01","chap02","chap03","chap04","chap05","chap06","chap07","chap08","chap09","chap10","chap11","chap12","chap13","chap14","chap15","chap16","chap17","chap18","chap19","chap20","chap21","chap22","chap23","chap24","chap25","chap26","chap27","chap28","chap29","chap30","chap31"]};function s(){return{sourceId:12,keyLength:7}}function l(t){const e={sourceId:12,keyLength:7};let a=t,n=0;"number"==typeof a&&(a=t.toString(10));let o=a.indexOf(".");if(o>-1){let t=a.substr(o+1);switch(t.length){case 1:t+="00";break;case 2:t+="0"}n=parseInt(t,10)}return{pid:n,pageKey:parseInt(a.substr(0,e.keyLength),10)}}function c(t=location.pathname){let e={sid:12,bid:0,uid:0},a=function(t){let e=t;return e=t.substr(1),"/"===e[e.length-1]&&(e=e.substr(0,e.length-1)),e.split("/")}(t);if(e.bid=i.indexOf(a[2]),-1===e.bid)return-1;if(e.uid=function(t,e,a,n,o){if(o&&(n=o),r[a])return r[a].indexOf(n);throw new Error("unexpected bookId: "+a)}(...a),-1===e.uid)return-1;let o=n("%02s%01s%04s",e.sid,e.bid,e.uid);return parseInt(o,10)}function p(t){let{pid:e,pageKey:a}=l(t),n=a.toString(10),o={error:!1,message:"ok",sid:0,bookId:"",uid:0,pid:e-1};if(7!==n.length)return o.error=!0,o.message="Integer portion of key should have a length of 7, key is: "+n,o;if(o.sid=parseInt(n.substr(0,2),10),12!==o.sid)return o.error=!0,o.message=`Invalid sourceId: ${o.sid}, expecting: 12`,o;let r=parseInt(n.substr(2,1),10);return o.bookId=i[r],o.uid=parseInt(n.substr(3,4),10),o}t.exports={getNumberOfUnits:function(t){if(r[t])return r[t].length-1;throw new Error("getNumberOfUnits() unexpected bookId: "+t)},getBooks:function(){return o},getSourceId:function(){return 12},getKeyInfo:s,parseKey:l,genPageKey:c,genParagraphKey:function(t,e=location.pathname){let a,n=e;return a="string"==typeof t?(parseInt(t.substr(1),10)+1)/1e3:(t+1)/1e3,"string"==typeof e&&(n=c(e)),n+a},decodeKey:p,getUrl:function(t,e=!1){let a=p(t),n="invalid";if(a.error)return"/invalid/key/";if(r[a.bookId]&&(n=r[a.bookId][a.uid],"text"===a.bookId)){let t=n.substr(4,2);n=`${t}/${n}`}return e?`/t/acim/${a.bookId}/${n}/`:`/${a.bookId}/${n}/`},describeKey:function(t){let e=p(t);if(e.error)return{key:t,error:!0,source:"acim"};let a={key:t,source:"acim",book:e.bookId,unit:r[e.bookId][e.uid]};return e.pid>-1&&(a.pid="p"+e.pid),a}}},88:function(t,e,a){const n=a(131).sprintf,o=["text","workbook","manual","acq"],i=["xxx",...o],r={acq:["xxx","welcome","acim","cims","formats","contact","timers"],text:["xxx","forward","intro","chap0101","chap0102","chap0201","chap0202","chap0203","chap0204","chap0205","chap0206","chap0301","chap0302","chap0303","chap0304","chap0305","chap0306","chap0307","chap0308","chap0309","chap0401","chap0402","chap0403","chap0404","chap0405","chap0406","chap0407","chap0408","chap0409","chap0501","chap0502","chap0503","chap0504","chap0505","chap0506","chap0507","chap0508","chap0509","chap0601","chap0602","chap0603","chap0604","chap0605","chap0701","chap0702","chap0703","chap0704","chap0705","chap0706","chap0707","chap0708","chap0709","chap0710","chap0711","chap0712","chap0801","chap0802","chap0803","chap0804","chap0805","chap0806","chap0807","chap0808","chap0809","chap0810","chap0811","chap0901","chap0902","chap0903","chap0904","chap0905","chap0906","chap0907","chap0908","chap0909","chap0910","chap0911","chap1001","chap1002","chap1003","chap1004","chap1005","chap1006","chap1007","chap1008","chap1101","chap1102","chap1103","chap1104","chap1105","chap1106","chap1107","chap1108","chap1109","chap1110","chap1201","chap1202","chap1203","chap1204","chap1205","chap1206","chap1207","chap1301","chap1302","chap1303","chap1304","chap1305","chap1306","chap1307","chap1308","chap1309","chap1401","chap1402","chap1403","chap1404","chap1405","chap1406","chap1407","chap1501","chap1502","chap1503","chap1504","chap1505","chap1506","chap1507","chap1508","chap1509","chap1510","chap1511","chap1601","chap1602","chap1603","chap1604","chap1605","chap1606","chap1607","chap1608","chap1701","chap1702","chap1703","chap1704","chap1705","chap1706","chap1707","chap1708","chap1709","chap1801","chap1802","chap1803","chap1804","chap1805","chap1806","chap1807","chap1808","chap1809","chap1810","chap1811","chap1901","chap1902","chap1903","chap1904","chap1905","chap2001","chap2002","chap2003","chap2004","chap2005","chap2006","chap2007","chap2008","chap2009","chap2101","chap2102","chap2103","chap2104","chap2105","chap2106","chap2107","chap2108","chap2109","chap2201","chap2202","chap2203","chap2204","chap2205","chap2206","chap2207","chap2301","chap2302","chap2303","chap2304","chap2305","chap2401","chap2402","chap2403","chap2404","chap2405","chap2406","chap2407","chap2408","chap2501","chap2502","chap2503","chap2504","chap2505","chap2506","chap2507","chap2508","chap2509","chap2510","chap2601","chap2602","chap2603","chap2604","chap2605","chap2606","chap2607","chap2608","chap2609","chap2610","chap2611","chap2701","chap2702","chap2703","chap2704","chap2705","chap2706","chap2707","chap2708","chap2709","chap2801","chap2802","chap2803","chap2804","chap2805","chap2806","chap2807","chap2808","chap2901","chap2902","chap2903","chap2904","chap2905","chap2906","chap2907","chap2908","chap2909","chap2910","chap3001","chap3002","chap3003","chap3004","chap3005","chap3006","chap3007","chap3008","chap3009","chap3101","chap3102","chap3103","chap3104","chap3105","chap3106","chap3107","chap3108"],workbook:["xxx","introp1","l001","l002","l003","l004","l005","l006","l007","l008","l009","l010","l011","l012","l013","l014","l015","l016","l017","l018","l019","l020","l021","l022","l023","l024","l025","l026","l027","l028","l029","l030","l031","l032","l033","l034","l035","l036","l037","l038","l039","l040","l041","l042","l043","l044","l045","l046","l047","l048","l049","l050","review1","l051","l052","l053","l054","l055","l056","l057","l058","l059","l060","l061","l062","l063","l064","l065","l066","l067","l068","l069","l070","l071","l072","l073","l074","l075","l076","l077","l078","l079","l080","review2","l081","l082","l083","l084","l085","l086","l087","l088","l089","l090","l091","l092","l093","l094","l095","l096","l097","l098","l099","l100","l101","l102","l103","l104","l105","l106","l107","l108","l109","l110","review3","l111","l112","l113","l114","l115","l116","l117","l118","l119","l120","l121","l122","l123","l124","l125","l126","l127","l128","l129","l130","l131","l132","l133","l134","l135","l136","l137","l138","l139","l140","review4","l141","l142","l143","l144","l145","l146","l147","l148","l149","l150","l151","l152","l153","l154","l155","l156","l157","l158","l159","l160","l161","l162","l163","l164","l165","l166","l167","l168","l169","l170","review5","l171","l172","l173","l174","l175","l176","l177","l178","l179","l180","intro181","l181","l182","l183","l184","l185","l186","l187","l188","l189","l190","l191","l192","l193","l194","l195","l196","l197","l198","l199","l200","review6","l201","l202","l203","l204","l205","l206","l207","l208","l209","l210","l211","l212","l213","l214","l215","l216","l217","l218","l219","l220","introp2","forgiveness","l221","l222","l223","l224","l225","l226","l227","l228","l229","l230","salvation","l231","l232","l233","l234","l235","l236","l237","l238","l239","l240","world","l241","l242","l243","l244","l245","l246","l247","l248","l249","l250","sin","l251","l252","l253","l254","l255","l256","l257","l258","l259","l260","body","l261","l262","l263","l264","l265","l266","l267","l268","l269","l270","christ","l271","l272","l273","l274","l275","l276","l277","l278","l279","l280","holyspirit","l281","l282","l283","l284","l285","l286","l287","l288","l289","l290","realworld","l291","l292","l293","l294","l295","l296","l297","l298","l299","l300","secondcoming","l301","l302","l303","l304","l305","l306","l307","l308","l309","l310","lastjudgement","l311","l312","l313","l314","l315","l316","l317","l318","l319","l320","creation","l321","l322","l323","l324","l325","l326","l327","l328","l329","l330","ego","l331","l332","l333","l334","l335","l336","l337","l338","l339","l340","miracle","l341","l342","l343","l344","l345","l346","l347","l348","l349","l350","whatami","l351","l352","l353","l354","l355","l356","l357","l358","l359","l360","final","l361","l362","l363","l364","l365","epilog"],manual:["xxx","intro","chap01","chap02","chap03","chap04","chap05","chap06","chap07","chap08","chap09","chap10","chap11","chap12","chap13","chap14","chap15","chap16","chap17","chap18","chap19","chap20","chap21","chap22","chap23","chap24","chap25","chap26","chap27","chap28","chap29"]};function s(t,e,a,n,o){if(o&&(n=o),r[a])return r[a].indexOf(n);throw new Error("unexpected bookId: "+a)}function l(){return{sourceId:15,keyLength:7}}function c(t){const e={sourceId:15,keyLength:7};let a=t,n=0;"number"==typeof a&&(a=t.toString(10));let o=a.indexOf(".");if(o>-1){let t=a.substr(o+1);switch(t.length){case 1:t+="00";break;case 2:t+="0"}n=parseInt(t,10)}return{pid:n,pageKey:parseInt(a.substr(0,e.keyLength),10)}}function p(t=location.pathname){let e={sid:15,bid:0,uid:0},a=function(t){let e=t;return e=t.substr(1),"/"===e[e.length-1]&&(e=e.substr(0,e.length-1)),e.split("/")}(t);if(e.bid=i.indexOf(a[2]),-1===e.bid)return-1;if(e.uid=s(...a),-1===e.uid)return-1;let o=n("%02s%01s%04s",e.sid,e.bid,e.uid);return parseInt(o,10)}function d(t){let{pid:e,pageKey:a}=c(t),n=a.toString(10),o={error:!1,message:"ok",sid:0,bookId:"",uid:0,pid:e-1};if(7!==n.length)return o.error=!0,o.message="Integer portion of key should have a length of 7, key is: "+n,o;if(o.sid=parseInt(n.substr(0,2),10),15!==o.sid)return o.error=!0,o.message=`Invalid sourceId: ${o.sid}, expecting: 15`,o;let r=parseInt(n.substr(2,1),10);return o.bookId=i[r],o.uid=parseInt(n.substr(3,4),10),o}t.exports={getNumberOfUnits:function(t){if(r[t])return r[t].length-1;throw new Error("getNumberOfUnits() unexpected bookId: "+t)},getBooks:function(){return o},getSourceId:function(){return 15},getKeyInfo:l,parseKey:c,getUnitId:s,genPageKey:p,genParagraphKey:function(t,e=location.pathname){let a,n=e;return a="string"==typeof t?(parseInt(t.substr(1),10)+1)/1e3:(t+1)/1e3,"string"==typeof e&&(n=p(e)),n+a},decodeKey:d,getUrl:function(t,e=!1){let a=d(t),n="invalid";if(a.error)return"/invalid/key/";if(r[a.bookId]&&(n=r[a.bookId][a.uid],"text"===a.bookId)){let t=n.substr(4,2);n=`${t}/${n}`}return e?`/t/acimoe/${a.bookId}/${n}/`:`/${a.bookId}/${n}/`},describeKey:function(t){let e=d(t);if(e.error)return{key:t,error:!0,source:"acimoe"};let a={key:t,source:"acimoe",book:e.bookId,unit:r[e.bookId][e.uid]};return e.pid>-1&&(a.pid="p"+e.pid),a}}},89:function(t,e,a){const n=a(132).sprintf,o=["course","treatise","dialog","acq"],i=["xxx",...o],r={course:["xxx","intro","prelude","chap01","chap02","chap03","chap04","chap05","chap06","chap07","chap08","chap09","chap10","chap11","chap12","chap13","chap14","chap15","chap16","chap17","chap18","chap19","chap20","chap21","chap22","chap23","chap24","chap25","chap26","chap27","chap28","chap29","chap30","chap31","chap32","learning1"],treatise:["xxx","t1chap01","t1chap02","t1chap03","t1chap04","t1chap05","t1chap06","t1chap07","t1chap08","t1chap09","t1chap10","t2chap01","t2chap02","t2chap03","t2chap04","t2chap05","t2chap06","t2chap07","t2chap08","t2chap09","t2chap10","t2chap11","t2chap12","t2chap13","t3chap01","t3chap02","t3chap03","t3chap04","t3chap05","t3chap06","t3chap07","t3chap08","t3chap09","t3chap10","t3chap11","t3chap12","t3chap13","t3chap14","t3chap15","t3chap16","t3chap17","t3chap18","t3chap19","t3chap20","t3chap21","t3chap22","t4chap01","t4chap02","t4chap03","t4chap04","t4chap05","t4chap06","t4chap07","t4chap08","t4chap09","t4chap10","t4chap11","t4chap12","learning2"],dialog:["xxx","chap01","chap02","chap03","chap04","chap05","chap06","chap07","chap08","chap09","chap10","chap11","chap12","chap13","chap14","chap15","chap16","chap17","day01","day02","day03","day04","day05","day06","day07","day08","day09","day10","day11","day12","day13","day14","day15","day16","day17","day18","day19","day20","day21","day22","day23","day24","day25","day26","day27","day28","day29","day30","day31","day32","day33","day34","day35","day36","day37","day38","day39","day40","epilog","learning3","dialog"],acq:["xxx","welcome","book","access"]};function s(t,e){if(r[t])return r[t].indexOf(e);throw new Error("unexpected bookId: "+t)}function l(){return{sourceId:14,keyLength:7}}function c(t){const e={sourceId:14,keyLength:7};let a=t,n=0;"number"==typeof a&&(a=t.toString(10));let o=a.indexOf(".");if(o>-1){let t=a.substr(o+1);switch(t.length){case 1:t+="00";break;case 2:t+="0"}n=parseInt(t,10)}return{pid:n,pageKey:parseInt(a.substr(0,e.keyLength),10)}}function p(t=location.pathname){let e={sid:14,bid:0,uid:0,qid:0},a=function(t){let e=t;return e=t.substr(1),"/"===e[e.length-1]&&(e=e.substr(0,e.length-1)),e.split("/")}(t);if(e.bid=i.indexOf(a[2]),-1===e.bid)return-1;if(e.uid=s(a[2],a[3]),-1===e.bid)return-1;let o=n("%02s%02s%03s",e.sid,e.bid,e.uid);return parseInt(o,10)}function d(t,e=!0){let{pid:a,pageKey:n}=c(t),o=n.toString(10),r={error:0,message:"ok",sid:14,bookId:"",uid:0,pid:a-1};if(7!==o.length)return r.error=!0,r.message="Integer portion of key should have a length of 7, key is: "+o,r;let s=parseInt(o.substr(2,2),10);return r.bookId=i[s],r.uid=e?parseInt(o.substr(4,3),10)-1:parseInt(o.substr(4,3),10),r}t.exports={getNumberOfUnits:function(t){if(r[t])return r[t].length-1;throw new Error("getNumberOfUnits() unexpected bookId: "+t)},getBooks:function(){return o},getSourceId:function(){return 14},getKeyInfo:l,parseKey:c,getUnitId:s,getUrl:function(t,e=!1){let a=d(t,!1),n="invalid";return a.error?"/invalid/key/":(r[a.bookId]&&(n=r[a.bookId][a.uid]),e?`/t/acol/${a.bookId}/${n}/`:`/${a.bookId}/${n}/`)},genPageKey:p,genParagraphKey:function(t,e=location.pathname){let a,n=e;return a="string"==typeof t?(parseInt(t.substr(1),10)+1)/1e3:(t+1)/1e3,"string"==typeof e&&(n=p(e)),n+a},decodeKey:d,describeKey:function(t){let e=d(t,!1);if(e.error)return{key:t,error:!0,source:"acol"};let a={key:t,source:"acol",book:e.bookId,unit:r[e.bookId][e.uid]};return e.pid>-1&&(a.pid="p"+e.pid),a}}},9:function(t,e,a){"use strict";e.a={acolManager:"rmercer33+acol@gmail.com",cmiUserId:"05399539cca9ac38db6db36f5c770ff1",sources:"/public/config/sources.json",user:"https://kkdlxunoe7.execute-api.us-east-1.amazonaws.com/latest",search:"https://x5rigstpd2.execute-api.us-east-1.amazonaws.com/latest/search"}},90:function(t,e,a){const n=a(133).sprintf,o=["yaa","grad","sg2002","sg2003","sg2004","sg2005","sg2006","sg2007","sg2008","sg2009","sg2010","sg2011","sg2012","sg2013","sg2014","sg2015","sg2016","sg2017","sg2018","acq"],i=["xxx",...o],r={acq:["xxx","welcome","raj","download","web"],yaa:["xxx","acknowledgments","foreword","020782","020882","020982","021082","021182a","021182b","021282","021382","021482","021682","021782","021882a","021882b","021882c","021982","022082","022182a","022182b","022382a","022382b","022382c","022482","022582","022682a","022682b","022682c","022782","022882","030182a","030182b","030282","030382","030482a","030482b","030582a","030582b","030682a","030682b","030682c","030682d","030682e","030882","030982","031082a","031082b","031082c","031182","031382","031582","031982","032982","033082","042782","042882","042982","043082","050182","050282","050382","050782","050982","051082a","051082b","051082c","051182","051582","051782","052882","053082","060382","061082","061282","061482","061982","062182","afterword"],grad:["xxx","g000002","g000003","g010491","g010591","g011491","g011591","g011691","g011891","g012091","g012591","g012791","g020291","g020591","g020691","g021291","g021391","g021491","g022091","g022591","g030291","g030891","g031491","g031991","g032091","g032191","g032291","g032591","g032991"],sg2002:["xxx","061202","073102","080702","081402","082802","090402","091102","091802","092502","100202","101002","101702","102402","103102","110702","112102","120502","121202","121902"],sg2003:["xxx","010203","010903","011603","012303","020603","021303","022003","022703","030603","031303","032003","032703","040303","041003","042403","050103","051103","051803","052503","060103","060803","061503","062203","062903","070603","071303","072003","072703","080303","081003","081703","082403","083103","090703","091403","092103","092803","101203","101903","102603","110203","110903","111603","112303","120703","121403","122103"],sg2004:["xxx","011104","011804","012504","020104","020804","021504","022204","030704","031404","032804","040404","041104","041804","042504","050204","050904","051604","052304","053004","061304","062004","062704","071104","071804","072504","080104","080804","081504","082204","090504","091204","091904","092604","100304","101004","101704","102404","110704","112104","112804","120504","121204","121904"],sg2005:["xxx","010205","011605","012305","013005","021305","022005","030605","031305","032705","040305","041005","041705","042405","050105","050805","052205","060505","061205","061905","070305","071005","071705","072405","080705","081405","082105","082805","090405","091105","091805","100205","100905","101605","102305","110605","111305","112005","120405","121105","121805"],sg2006:["xxx","010806","011506","012206","012906","021206","022606","030406","031106","031906","040106","041506","042906","050606","052006","052706","060306","061006","061806","062406","070106","071506","073006","080506","081206","082006","090206","090906","092306","100706","101406","102106","102806","111106","111806","120206"],sg2007:["xxx","081807","082507","090907","091607","092207","100607","101407","102707","110307","111007","111807","120807","121607"],sg2008:["xxx","012008","012708","021008","021708","022408","030208","030908","032508","033008","040608","041308","042008","050408","051808","052508","060108","060808","061508","062208","070608","071308","072708","081708","083108","090708","091408","092108","100508","101908","102608","110208","110908","112308"],sg2009:["xxx","010309","011009","011709","012409","020709","022809","031409","032809","040409","041209","042509","050909","052409","053109","060709","061309","062009","071109","071809","072509","080109","080809","082909","090509","091209","091909","092709","101009","102409","103109","111409","112209","112809","120509","121909"],sg2010:["xxx","010210","011610","013010","020610","021310","030610","032010","032710","040310","041010","050110","051510","052910","060510","061210","061910","070310","071010","071710","072410","080710","082810","090410","091110","092510","100210","100910","101610","102310","110610","111310","112010","112710","120410","121810"],sg2011:["xxx","010111","010811","011511","012211","020511","021611","021911","031211","032011","032611","040311","040911","041611","042311","043011","050711","051411","052211","060411","061211","061811","062611","070911","071611","073011","080611","082011","082711","090311","091711","092411","100111","101511","102311","110511","111311","112611","120411","121111","122011"],sg2012:["xxx","010712","012212","020512","021212","021812","032412","033112","040812","041512","042212","042912","051212","052012","060312","061712","072212","072912","080412","081112","081812","082712","090812","091612","092312","093012","100812","101412","102112","110512","111212"],sg2013:["xxx","042713","050413","051113","052013","052813","060213","060913","062513","063013","070713","071413","072113","080413","081113","082513","090113","090813","091513","092313","100613","101513","102013","102713","110313","112413","122213","123013"],sg2014:["xxx","010614","011414","012814","020914","022414","030914","041314","061614","062914","091514"],sg2015:["xxx","041815","042515","050315","050915","051715","060715","061415","062115","062815","070515","071315","072115","080115","082315","091315","100215","102115","110115"],sg2016:["xxx","070316","071616","080216"],sg2017:["xxx","040817","041617","042317","043017","051217","060917","071117","072317","092317","100117","101717","120417"],sg2018:["xxx","013118","031118","081918","082918"]};function s(t,e){if(r[t])return r[t].indexOf(e);throw new Error("unexpected bookId: "+t)}function l(){return{sourceId:13,keyLength:7}}function c(t){const e={sourceId:13,keyLength:7};let a=t,n=0;"number"==typeof a&&(a=t.toString(10));let o=a.indexOf(".");if(o>-1){let t=a.substr(o+1);switch(t.length){case 1:t+="00";break;case 2:t+="0"}n=parseInt(t,10)}return{pid:n,pageKey:parseInt(a.substr(0,e.keyLength),10)}}function p(t=location.pathname){let e={sid:13,bid:0,uid:0,qid:0},a=function(t){let e=t;return e=t.substr(1),"/"===e[e.length-1]&&(e=e.substr(0,e.length-1)),e.split("/")}(t);if(e.bid=i.indexOf(a[2]),-1===e.bid)return-1;if(e.uid=s(a[2],a[3]),-1===e.bid)return-1;let o=n("%02s%02s%03s",e.sid,e.bid,e.uid);return parseInt(o,10)}function d(t){let{pid:e,pageKey:a}=c(t),n=a.toString(10),o={error:0,message:"ok",sid:13,bookId:"",uid:0,pid:e-1};if(7!==n.length)return o.error=!0,o.message="Integer portion of key should have a length of 7, key is: "+n,o;let r=parseInt(n.substr(2,2),10);return o.bookId=i[r],o.uid=parseInt(n.substr(4,3),10)-1,o}t.exports={getNumberOfUnits:function(t){if(r[t])return r[t].length-1;throw new Error("getNumberOfUnits() unexpected bookId: "+t)},getBooks:function(){return o},getUrl:function(t,e=!1){let a=d(t),n="invalid";return a.error?"/invalid/key/":(r[a.bookId]&&(n=r[a.bookId][a.uid+1]),e?`/t/raj/${a.bookId}/${n}/`:`/${a.bookId}/${n}/`)},getSourceId:function(){return 13},getKeyInfo:l,parseKey:c,getUnitId:s,genPageKey:p,genParagraphKey:function(t,e=location.pathname){let a,n=e;return a="string"==typeof t?(parseInt(t.substr(1),10)+1)/1e3:(t+1)/1e3,"string"==typeof e&&(n=p(e)),n+a},decodeKey:d,describeKey:function(t){let e=d(t);if(e.error)return{key:t,error:!0,source:"raj"};let a={key:t,source:"raj",book:e.bookId,unit:r[e.bookId][e.uid+1]};return e.pid>-1&&(a.pid="p"+e.pid),a}}},91:function(t,e,a){const n=a(134).sprintf,o=["til","acq"],i=["xxx",...o],r={acq:["xxx","welcome"],til:["xxx","chap01","chap02","chap03","chap04","chap05","chap06","chap07","chap08","chap09","chap10","chap11","chap12","chap13","chap14","chap15","chap16","chap17","chap18","chap18"]};function s(){return{sourceId:11,keyLength:8}}function l(t){const e={sourceId:11,keyLength:8};let a=t,n=0;"number"==typeof a&&(a=t.toString(10));let o=a.indexOf(".");if(o>-1){let t=a.substr(o+1);switch(t.length){case 1:t+="00";break;case 2:t+="0"}n=parseInt(t,10)}return{pid:n,pageKey:parseInt(a.substr(0,e.keyLength),10)}}function c(t=location.pathname){let e={sid:11,bid:0,uid:0,hasQuestions:0,qid:0},a=function(t){let e=t;return e=t.substr(1),"/"===e[e.length-1]&&(e=e.substr(0,e.length-1)),e.split("/")}(t);if(e.bid=i.indexOf(a[2]),-1===e.bid)return-1;if(e.uid=function(t,e){if(r[t])return r[t].indexOf(e);throw new Error("unexpected bookId: "+t)}(a[2],a[3]),-1===e.bid)return-1;5===a.length&&(e.hasQuestions=1,e.qid=parseInt(a[4].substr(1),10));let o=n("%02s%01s%02s%1s%02s",e.sid,e.bid,e.uid,e.hasQuestions,e.qid);return parseInt(o,10)}function p(t){let{pid:e,pageKey:a}=l(t),n=a.toString(10),o={error:0,message:"ok",sid:11,bookId:"",uid:0,hasQuestions:!1,qid:0,pid:e-1};if(8!==n.length)return o.error=!0,o.message="Integer portion of key should have a length of 8, key is: "+n,o;let r=parseInt(n.substr(2,1),10);return o.bookId=i[r],o.uid=parseInt(n.substr(3,2),10)-1,o.hasQuestions="1"===n.substr(5,1),o.qid=parseInt(n.substr(6,2),10)-1,o}t.exports={getNumberOfUnits:function(t){if(r[t])return r[t].length-1;throw new Error("getNumberOfUnits() unexpected bookId: "+t)},getUrl:function(t,e=!1){let a=p(t),n="invalid";return a.error?"/invalid/key/":(r[a.bookId]&&(n=r[a.bookId][a.uid+1]),e?`/t/jsb/${a.bookId}/${n}/`:`/${a.bookId}/${n}/`)},getBooks:function(){return o},getSourceId:function(){return 11},getKeyInfo:s,parseKey:l,genPageKey:c,genParagraphKey:function(t,e=location.pathname){let a,n=e;return a="string"==typeof t?(parseInt(t.substr(1),10)+1)/1e3:(t+1)/1e3,"string"==typeof e&&(n=c(e)),n+a},decodeKey:p,describeKey:function(t){let e=p(t);if(e.error)return{key:t,error:!0,source:"jsb"};let a={key:t,source:"jsb",book:e.bookId,unit:r[e.bookId][e.uid+1]};return e.pid>-1&&(a.pid="p"+e.pid),a}}},92:function(t,e,a){const n=a(135).sprintf,o=["tjl","wos","early","woh","wot","wok","acq"],i=["xxx",...o],r={acq:["xxx","welcome","wom","web"],tjl:["xxx","ack","foreword","chap01","chap02","chap03","chap04","chap05","chap06","chap07","chap08","chap09","chap10","chap11","chap12","epilogue"],wos:["xxx","foreword","preface","chap01","chap02","chap03","chap04","afterwords","epilog","prayer"],early:["xxx","ble","c2s","hoe","ign","com","dbc","dth","fem","gar","hea","hoi","hsp","joy1","joy2","lht","moa","mot","wak","wlk"]};function s(t,e){if("woh"===t||"wot"===t||"wok"===t)return n("l%02s",e);if(r[t])return r[t][e];throw new Error("unexpected bookId: "+t)}function l(){return{sourceId:10,keyLength:8}}function c(t){const e={sourceId:10,keyLength:8};let a=t,n=0;"number"==typeof a&&(a=t.toString(10));let o=a.indexOf(".");if(o>-1){let t=a.substr(o+1);switch(t.length){case 1:t+="00";break;case 2:t+="0"}n=parseInt(t,10)}return{pid:n,pageKey:parseInt(a.substr(0,e.keyLength),10)}}function p(t=location.pathname){let e={sid:10,bid:0,uid:0,hasQuestions:0,qid:0},a=function(t){let e=t;return e=t.substr(1),"/"===e[e.length-1]&&(e=e.substr(0,e.length-1)),e.split("/")}(t);if(e.bid=i.indexOf(a[2]),-1===e.bid)return-1;if(e.uid=function(t,e,a=!1){if("woh"===t||"wot"===t||"wok"===t)return parseInt(e.substr(1),10);if(r[t])return r[t].indexOf(e);throw new Error("unexpected bookId: "+t)}(a[2],a[3]),-1===e.bid)return-1;5===a.length&&(e.hasQuestions=1,e.qid=parseInt(a[4].substr(1),10));let o=n("%02s%01s%02s%1s%02s",e.sid,e.bid,e.uid,e.hasQuestions,e.qid);return parseInt(o,10)}function d(t,e=!0){let{pid:a,pageKey:n}=c(t),o=n.toString(10),r={error:0,message:"ok",sid:10,bookId:"",uid:0,hasQuestions:!1,qid:0,pid:a-1};if(8!==o.length)return r.error=!0,r.message="Integer portion of key should have a length of 8, key is: "+o,r;let s=parseInt(o.substr(2,1),10);return r.bookId=i[s],e?(r.uid=parseInt(o.substr(3,2),10)-1,r.qid=parseInt(o.substr(6,2),10)-1):(r.uid=parseInt(o.substr(3,2),10),r.qid=parseInt(o.substr(6,2),10)),r.hasQuestions="1"===o.substr(5,1),r}t.exports={getBooks:function(){return o},getSourceId:function(){return 10},getKeyInfo:l,getUrl:function(t,e=!1){let a,n=d(t,!1),o="invalid",i="/"+n.bookId;return n.error?"/invalid/key/":(o=s(n.bookId,n.uid),i=`${i}/${o}/`,n.hasQuestions&&(a="q"+n.qid,i=`${i}${a}/`),e?"/t/wom"+i:i)},parseKey:c,genPageKey:p,genParagraphKey:function(t,e=location.pathname){let a,n=e;return a="string"==typeof t?(parseInt(t.substr(1),10)+1)/1e3:(t+1)/1e3,"string"==typeof e&&(n=p(e)),n+a},decodeKey:d,describeKey:function(t){let e=d(t,!1);if(e.error)return{key:t,error:!0,source:"wom"};let a={key:t,source:"wom",book:e.bookId};return a.unit=s(e.bookId,e.uid),e.hasQuestions&&(a.question="q"+e.qid),e.pid>-1&&(a.pid="p"+e.pid),a}}}});
//# sourceMappingURL=transcript.js.map